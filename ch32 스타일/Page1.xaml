<Page x:Class="ch32_스타일.Page1"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:ch32_스타일"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="Page1">
    <!-- 
        Page:
        - Frame 컨트롤에서 호스팅되는 콘텐츠
        - 내비게이션 기능 지원
        - Window와 유사하지만 독립적인 창 아님
        
        d:DesignHeight, d:DesignWidth:
        - 디자인 타임 크기
        - 디자이너에서 미리보기
        - 런타임에는 Frame 크기에 맞춤
        
        Title="Page1":
        - 페이지 제목
        - NavigationService에서 사용
    -->
    
    <Page.Resources>
        <!-- 
            Page.Resources:
            - 페이지 수준 리소스
            - 현재 비어 있음
            
            로컬 리소스 정의 가능:
            <Page.Resources>
                <Style TargetType="TextBlock">
                    <Setter Property="FontSize" Value="16"/>
                </Style>
            </Page.Resources>
            
            리소스 조회 순서:
            1. Button의 Resources
            2. Grid의 Resources
            3. Page.Resources (현재 비어 있음)
            4. Application.Resources
               - MergedDictionaries (Dictionary1.xaml) ✓
            5. 시스템 리소스
        -->
    </Page.Resources>

    <Grid>
        <!-- 
            Grid:
            - 간단한 레이아웃
            - 버튼 하나만 포함
        -->
        
        <Button Style="{StaticResource 버튼스타일2}">버튼</Button>
        <!-- 
            Button:
            - Dictionary1.xaml의 "버튼스타일2" 적용
            
            Style="{StaticResource 버튼스타일2}":
            - StaticResource 마크업 확장
            - "버튼스타일2" 키로 리소스 검색
            
            리소스 조회 과정:
            1. Button의 Resources 검색 (없음)
            2. Grid의 Resources 검색 (없음)
            3. Page.Resources 검색 (비어 있음)
            4. Application.Resources 검색
               - MergedDictionaries 확인
               - Dictionary1.xaml에서 "버튼스타일2" 발견 ✓
            5. 스타일 적용
            
            버튼스타일2 적용 속성:
            - Cursor: Hand (손 모양)
            - Background: LightGreen (연한 녹색)
            - Foreground: White (흰색 텍스트)
            - Width: 150px
            - Height: 50px
            - FontSize: 20px
            - FontWeight: Bold
            - Margin: 10px
            - Template: 둥근 모서리 (CornerRadius=20)
            
            버튼스타일 vs 버튼스타일2:
            - 거의 동일
            - 차이점: Background 색상
              - 버튼스타일: Salmon (연어색)
              - 버튼스타일2: LightGreen (연한 녹색)
            
            Content="버튼":
            - 버튼에 표시될 텍스트
            - ContentPresenter가 렌더링
            
            결과:
            ┌─────────────────┐
            │   버튼          │ ← LightGreen 배경, 흰색 텍스트
            └─────────────────┘
               둥근 모서리 (CornerRadius=20)
            
            동일한 전역 리소스:
            - MainWindow.xaml: "버튼스타일" (Salmon)
            - Page1.xaml: "버튼스타일2" (LightGreen)
            - UserControl1.xaml: "버튼스타일" (Salmon)
            
            모두 App.xaml의 MergedDictionaries에서 로드:
            - 중앙 관리
            - 일관성 유지
            - 재사용 가능
        -->
    </Grid>
    
    <!--
        Page에서 스타일 사용:
        
        ========== 1. 전역 스타일 사용 (현재 방법) ==========
        
        <Button Style="{StaticResource 버튼스타일2}">버튼</Button>
        
        장점:
        - App.xaml의 전역 리소스 활용
        - 모든 Page에서 일관성
        
        ========== 2. 페이지별 스타일 정의 ==========
        
        <Page.Resources>
            <Style TargetType="Button" x:Key="PageButtonStyle">
                <Setter Property="Background" Value="Blue"/>
                <Setter Property="Foreground" Value="White"/>
            </Style>
        </Page.Resources>
        
        <Grid>
            <Button Style="{StaticResource PageButtonStyle}">버튼</Button>
        </Grid>
        
        장점:
        - 페이지별 독립적인 스타일
        - 전역 리소스와 충돌 없음
        
        ========== 3. 전역 스타일 재정의 ==========
        
        <Page.Resources>
            <Style TargetType="Button" x:Key="버튼스타일2" 
                   BasedOn="{StaticResource 버튼스타일2}">
                <Setter Property="Background" Value="Blue"/>
            </Style>
        </Page.Resources>
        
        <Grid>
            <Button Style="{StaticResource 버튼스타일2}">버튼</Button>
        </Grid>
        
        결과:
        - 전역 스타일 상속
        - Background만 Blue로 변경
        - 다른 속성은 그대로
        
        ========== 4. 여러 버튼에 다른 스타일 ==========
        
        <StackPanel>
            <Button Style="{StaticResource 버튼스타일}">Salmon</Button>
            <Button Style="{StaticResource 버튼스타일2}">LightGreen</Button>
            <Button>기본 스타일</Button>
        </StackPanel>
        
        ========== 5. Frame에서 Page 호스팅 ==========
        
        MainWindow.xaml:
        <Frame x:Name="mainFrame" NavigationUIVisibility="Hidden"/>
        
        MainWindow.xaml.cs:
        private void NavigateToPage1()
        {
            mainFrame.Navigate(new Page1());
        }
        
        Page1이 Frame에 로드:
        - 전역 스타일 적용
        - "버튼스타일2" 사용
        
        ========== 6. NavigationService 사용 ==========
        
        Page1.xaml.cs:
        private void Button_Click(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Page2());
        }
        
        ========== 7. 페이지 전환 시 스타일 유지 ==========
        
        Page1 → Page2 전환:
        - 모든 Page가 동일한 전역 리소스 사용
        - 일관된 스타일 유지
        
        ========== 8. 페이지별 테마 ==========
        
        Page1.xaml:
        <Page.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <ResourceDictionary Source="Themes/Page1Theme.xaml"/>
                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
        </Page.Resources>
        
        ========== 9. 동적 스타일 변경 ==========
        
        Page1.xaml.cs:
        private void ChangeStyle()
        {
            myButton.Style = (Style)Application.Current.Resources["버튼스타일"];
        }
        
        ========== 10. 데이터 바인딩 ==========
        
        ViewModel:
        public string ButtonStyleKey { get; set; } = "버튼스타일2";
        
        Page1.xaml:
        <Button Style="{DynamicResource {Binding ButtonStyleKey}}">버튼</Button>
        
        ========== Page vs Window 스타일 사용 ==========
        
        공통점:
        - 모두 전역 리소스 접근 가능
        - StaticResource/DynamicResource 사용
        - 로컬 리소스 정의 가능
        
        차이점:
        Page:
        - Frame에서 호스팅
        - NavigationService 지원
        - 전환 애니메이션
        
        Window:
        - 독립적인 창
        - ShowDialog() 가능
        - Owner 속성
        
        ========== 주의사항 ==========
        
        1. 리소스 조회 순서:
           - Page.Resources → Application.Resources
           - Frame의 Resources는 검색 안 됨
        
        2. NavigationService:
           - Page 전환 시 스타일 유지
           - 전역 리소스 활용
        
        3. 메모리:
           - Page 캐시 고려
           - KeepAlive 속성
        
        4. 성능:
           - 페이지별 리소스는 필요시만
           - 전역 리소스 우선 사용
    -->
</Page>
