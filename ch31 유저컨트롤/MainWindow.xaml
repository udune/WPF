<Window x:Class="ch31_유저컨트롤.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ch31_유저컨트롤"
        xmlns:local2="clr-namespace:ch31_유저컨트롤.uc"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    <!-- 
        네임스페이스 선언:
        
        xmlns:local="clr-namespace:ch31_유저컨트롤"
        - 기본 프로젝트 네임스페이스
        - MainWindow, App 등
        
        xmlns:local2="clr-namespace:ch31_유저컨트롤.uc"
        - UserControl이 있는 네임스페이스
        - ch31_유저컨트롤.uc 네임스페이스
        - UserControl1 클래스 포함
        
        네임스페이스 사용:
        - local2:UserControl1
        - local2는 접두사 (prefix)
        - UserControl1은 클래스 이름
        
        다른 네임스페이스 예:
        xmlns:controls="clr-namespace:MyProject.Controls"
        xmlns:views="clr-namespace:MyProject.Views"
        xmlns:uc="clr-namespace:MyProject.UserControls"
    -->

    <StackPanel>
        <!-- 
            StackPanel:
            - UserControl과 버튼을 세로로 배치
            - 3개의 UserControl1 인스턴스
            - 2개의 Button
        -->
        
        <!-- ========== 첫 번째 UserControl1 인스턴스 ========== -->
        <local2:UserControl1 Title="제목" MaxLength="30" PbHeight="20"/>
        <!-- 
            첫 번째 UserControl1:
            
            local2:UserControl1:
            - ch31_유저컨트롤.uc 네임스페이스의 UserControl1 클래스
            - XAML에서 객체 생성 (new UserControl1())
            - 인스턴스화
            
            속성 설정:
            
            Title="제목":
            - UserControl1.Title 속성에 "제목" 설정
            - public string Title { get; set; }
            - Label의 Content에 바인딩됨
            
            MaxLength="30":
            - UserControl1.MaxLength 속성에 "30" 설정
            - public string MaxLength { get; set; }
            - TextBox.MaxLength에 바인딩됨
            - ProgressBar.Maximum에 바인딩됨
            
            PbHeight="20":
            - UserControl1.PbHeight 속성에 "20" 설정
            - public string PbHeight { get; set; }
            - ProgressBar.Height에 바인딩됨
            
            Name 없음:
            - x:Name 속성 없음
            - 코드 비하인드에서 접근 불가능
            - 독립적으로 동작
            
            동작:
            1. UserControl1 인스턴스 생성
            2. 속성 설정 (Title, MaxLength, PbHeight)
            3. DataContext = this (생성자에서)
            4. 바인딩 활성화
            5. UI 렌더링
            
            결과:
            - Label: "제목"
            - TextBox: 최대 30자
            - ProgressBar: 높이 20픽셀, 최대값 30
        -->
        
        <!-- ========== 두 번째 UserControl1 인스턴스 (uc1) ========== -->
        <local2:UserControl1 Title="제목" MaxLength="30" PbHeight="20" x:Name="uc1"/>
        <!-- 
            두 번째 UserControl1:
            
            x:Name="uc1":
            - 코드 비하인드에서 접근 가능한 이름
            - MainWindow.xaml.cs에서 uc1 사용
            - uc1.txt.Text로 TextBox 내용 읽기
            
            Button_Click에서 사용:
            MessageBox.Show(uc1.txt.Text);
            
            접근 가능한 요소:
            - uc1: UserControl1 인스턴스
            - uc1.txt: TextBox (Name="txt")
            - uc1.Pb: ProgressBar (Name="Pb")
            - uc1.Title: Title 속성
            
            동일한 속성:
            - 첫 번째 인스턴스와 동일한 속성
            - Title="제목", MaxLength="30", PbHeight="20"
            - 하지만 독립적인 객체
            - 각자의 상태 관리
            
            독립성:
            - uc1의 TextBox와 uc2의 TextBox는 별개
            - 각각 다른 내용 입력 가능
            - 각각의 ProgressBar 값 독립적
        -->
        
        <!-- ========== 세 번째 UserControl1 인스턴스 (uc2) ========== -->
        <local2:UserControl1 Title="제목" MaxLength="30" PbHeight="20" x:Name="uc2"/>
        <!-- 
            세 번째 UserControl1:
            
            x:Name="uc2":
            - 코드 비하인드에서 접근 가능
            - MainWindow.xaml.cs에서 uc2 사용
            - uc2.Pb.Value로 ProgressBar 값 읽기
            
            Button_Click_1에서 사용:
            MessageBox.Show(uc2.Pb.Value.ToString());
            
            접근 가능한 요소:
            - uc2: UserControl1 인스턴스
            - uc2.txt: TextBox
            - uc2.Pb: ProgressBar
            
            세 개의 인스턴스 비교:
            
            인스턴스1 (이름 없음):
            - 독립적으로 동작
            - 코드에서 접근 불가
            - 시각적 표시만
            
            인스턴스2 (uc1):
            - txt.Text 읽기
            - "버튼1" 클릭 시 사용
            
            인스턴스3 (uc2):
            - Pb.Value 읽기
            - "버튼2" 클릭 시 사용
            
            각 인스턴스는 완전히 독립적:
            - 별도의 메모리 공간
            - 별도의 UI 요소
            - 별도의 상태
        -->
        
        <!-- ========== 버튼 1: uc1의 텍스트 표시 ========== -->
        <Button Click="Button_Click">버튼1</Button>
        <!-- 
            버튼1:
            
            Click="Button_Click":
            - 클릭 이벤트 핸들러
            - MainWindow.xaml.cs의 Button_Click 메서드
            
            Content:
            - "버튼1" 텍스트
            
            동작:
            1. 버튼 클릭
            2. Button_Click 이벤트 발생
            3. uc1.txt.Text 읽기
            4. MessageBox로 표시
            
            코드:
            MessageBox.Show(uc1.txt.Text);
            
            결과:
            - uc1 (두 번째 UserControl1)의 TextBox 내용 표시
            - 사용자가 입력한 텍스트 표시
        -->
        
        <!-- ========== 버튼 2: uc2의 ProgressBar 값 표시 ========== -->
        <Button Click="Button_Click_1">버튼2</Button>
        <!-- 
            버튼2:
            
            Click="Button_Click_1":
            - 클릭 이벤트 핸들러
            - MainWindow.xaml.cs의 Button_Click_1 메서드
            
            Content:
            - "버튼2" 텍스트
            
            동작:
            1. 버튼 클릭
            2. Button_Click_1 이벤트 발생
            3. uc2.Pb.Value 읽기
            4. MessageBox로 표시
            
            코드:
            MessageBox.Show(uc2.Pb.Value.ToString());
            
            결과:
            - uc2 (세 번째 UserControl1)의 ProgressBar 값 표시
            - 현재 글자 수 표시 (0~30)
        -->
    </StackPanel>
    
    <!--
        UserControl 전체 요약:
        
        ========== UserControl이란? ==========
        
        정의:
        - 재사용 가능한 사용자 정의 컨트롤
        - 여러 WPF 컨트롤을 조합하여 하나의 단위로 만듦
        - 프로젝트 내에서 여러 번 사용 가능
        
        장점:
        - 코드 재사용
        - 일관된 UI
        - 유지보수 용이
        - 모듈화
        
        구성:
        - XAML 파일: UI 정의 (UserControl1.xaml)
        - C# 파일: 로직 정의 (UserControl1.xaml.cs)
        - 속성: 외부에서 설정 가능한 값
        
        ========== 이 예제의 UserControl1 구조 ==========
        
        UI 구성:
        1. Label: 제목 표시 (Title 속성)
        2. 글자 수 표시: 현재/최대 글자 수
        3. TextBox: 텍스트 입력 (MaxLength 제한)
        4. ProgressBar: 글자 수 진행률 표시
        
        속성:
        - Title: 제목 (string)
        - MaxLength: 최대 글자 수 (string)
        - PbHeight: ProgressBar 높이 (string)
        
        바인딩:
        - Title → Label.Content
        - MaxLength → TextBox.MaxLength, ProgressBar.Maximum
        - PbHeight → ProgressBar.Height
        - txt.Text.Length → ProgressBar.Value
        
        ========== 네임스페이스 참조 ==========
        
        선언:
        xmlns:local2="clr-namespace:ch31_유저컨트롤.uc"
        
        사용:
        <local2:UserControl1 .../>
        
        다른 어셈블리의 UserControl:
        xmlns:controls="clr-namespace:MyLibrary.Controls;assembly=MyLibrary"
        <controls:CustomControl .../>
        
        ========== 여러 인스턴스 사용 ==========
        
        이 예제:
        - 3개의 UserControl1 인스턴스
        - 각각 독립적인 객체
        - 동일한 속성으로 초기화
        - 하지만 런타임에 독립적으로 동작
        
        시나리오:
        1. 사용자가 uc1의 TextBox에 "안녕" 입력
        2. 사용자가 uc2의 TextBox에 "Hello" 입력
        3. 버튼1 클릭 → "안녕" 표시
        4. 버튼2 클릭 → "5" 표시 ("Hello" 길이)
        
        ========== 실전 활용 예제 ==========
        
        1. 다양한 속성으로 사용:
           <local2:UserControl1 Title="이름" MaxLength="20" PbHeight="15"/>
           <local2:UserControl1 Title="주소" MaxLength="100" PbHeight="25"/>
           <local2:UserControl1 Title="설명" MaxLength="500" PbHeight="30"/>
        
        2. 동적 생성:
           private void AddControl_Click(object sender, RoutedEventArgs e)
           {
               var newControl = new UserControl1
               {
                   Title = "동적 컨트롤",
                   MaxLength = "50",
                   PbHeight = "20"
               };
               stackPanel.Children.Add(newControl);
           }
        
        3. 이벤트 처리:
           UserControl1에 이벤트 추가:
           public event EventHandler TextChanged;
           
           TextBox.TextChanged += (s, e) =>
           {
               TextChanged?.Invoke(this, EventArgs.Empty);
           };
           
           MainWindow:
           uc1.TextChanged += (s, e) =>
           {
               MessageBox.Show("텍스트 변경됨");
           };
        
        4. 데이터 바인딩:
           ViewModel:
           public ObservableCollection<ItemViewModel> Items { get; set; }
           
           MainWindow:
           <ItemsControl ItemsSource="{Binding Items}">
               <ItemsControl.ItemTemplate>
                   <DataTemplate>
                       <local2:UserControl1 
                           Title="{Binding Name}"
                           MaxLength="{Binding MaxChars}"
                           PbHeight="20"/>
                   </DataTemplate>
               </ItemsControl.ItemTemplate>
           </ItemsControl>
        
        5. ScrollViewer로 여러 개 표시:
           <ScrollViewer VerticalScrollBarVisibility="Auto">
               <StackPanel>
                   <local2:UserControl1 Title="항목1" MaxLength="30" PbHeight="20"/>
                   <local2:UserControl1 Title="항목2" MaxLength="30" PbHeight="20"/>
                   <local2:UserControl1 Title="항목3" MaxLength="30" PbHeight="20"/>
               </StackPanel>
           </ScrollViewer>
        
        ========== UserControl vs CustomControl ==========
        
        UserControl:
        - XAML + C# 조합
        - 빠른 개발
        - 특정 UI 조합
        - 이 예제가 UserControl
        
        CustomControl:
        - C# + Generic.xaml (테마)
        - 완전한 커스터마이징
        - 재템플릿 가능
        - 컨트롤 라이브러리
        
        ========== UserControl vs Page ==========
        
        UserControl:
        - 재사용 가능한 UI 컴포넌트
        - Window나 Page에 배치
        - 여러 개 동시 사용 가능
        
        Page:
        - Frame에서 호스팅
        - 전체 화면 단위
        - NavigationService
        
        ========== 주의사항 ==========
        
        1. 속성 타입:
           - 이 예제는 string 사용
           - 실무에서는 적절한 타입 사용 권장
           - int, double, bool 등
        
        2. 의존성 속성 (DependencyProperty):
           - 바인딩, 애니메이션, 스타일 지원
           - 실무에서 권장
           - 이 예제는 단순 속성 사용
        
        3. 네임스페이스:
           - xmlns 선언 필수
           - 네임스페이스 이름 명확히
        
        4. 접근 제한자:
           - Name 속성 (x:Name)
           - public으로 선언해야 외부 접근 가능
        
        5. 메모리:
           - 많은 인스턴스 생성 시 메모리 고려
           - 가상화 (Virtualization) 고려
    -->
</Window>
