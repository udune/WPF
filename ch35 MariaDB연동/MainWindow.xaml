<Window x:Class="ch35_MariaDB연동.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ch35_MariaDB연동"
        mc:Ignorable="d"
        Title="ch35 MariaDB 연동 튜토리얼" Height="600" Width="850">

    <Window.Resources>
        <Style x:Key="CodeExpanderStyle" TargetType="Expander">
            <Setter Property="Header" Value="코드 보기"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
            <Setter Property="IsExpanded" Value="False"/>
        </Style>
        <Style x:Key="CodeTextBoxStyle" TargetType="TextBox">
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Background" Value="#1E1E1E"/>
            <Setter Property="Foreground" Value="#DCDCDC"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="MaxHeight" Value="300"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <TabControl>
        <TabItem Header="연결 설정">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    <TextBlock Text="MariaDB/MySQL 데이터베이스 연결" FontSize="22" FontWeight="Bold" Margin="0,0,0,15"/>
                    <TextBlock Text="MySqlConnector 라이브러리를 사용하여 WPF 애플리케이션에서 MariaDB/MySQL 데이터베이스에 연결하고 CRUD 작업을 수행합니다."
                               TextWrapping="Wrap" Margin="0,0,0,20"/>

                    <GroupBox Header="1. MySqlConnector 패키지 설치" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="NuGet 패키지 관리자에서 MySqlConnector를 설치합니다:" Margin="0,0,0,10"/>
                            <Border Background="#E3F2FD" Padding="10" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="• MySqlConnector: .NET용 MySQL/MariaDB 클라이언트" FontSize="11"/>
                                    <TextBlock Text="• 비동기 지원, 성능 최적화" FontSize="11"/>
                                    <TextBlock Text="• MIT 라이선스 (무료)" FontSize="11"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="// NuGet 패키지 관리자 콘솔&#10;Install-Package MySqlConnector&#10;&#10;// 또는 .csproj 파일에 추가&#10;&lt;ItemGroup&gt;&#10;    &lt;PackageReference Include=&quot;MySqlConnector&quot; Version=&quot;2.4.0&quot; /&gt;&#10;&lt;/ItemGroup&gt;&#10;&#10;// 또는 dotnet CLI&#10;dotnet add package MySqlConnector"/>
                    </Expander>

                    <GroupBox Header="2. 연결 문자열 (Connection String)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="데이터베이스 연결에 필요한 정보를 포함합니다:" Margin="0,0,0,10"/>
                            <Border Background="#FFF3E0" Padding="10" CornerRadius="5">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Server" FontWeight="Bold" Grid.Row="0" Margin="0,2"/>
                                    <TextBlock Text="데이터베이스 서버 주소 (localhost, IP)" Grid.Row="0" Grid.Column="1" Margin="10,2,0,2"/>
                                    <TextBlock Text="Uid" FontWeight="Bold" Grid.Row="1" Margin="0,2"/>
                                    <TextBlock Text="사용자 ID (root, 또는 별도 계정)" Grid.Row="1" Grid.Column="1" Margin="10,2,0,2"/>
                                    <TextBlock Text="Database" FontWeight="Bold" Grid.Row="2" Margin="0,2"/>
                                    <TextBlock Text="데이터베이스 이름" Grid.Row="2" Grid.Column="1" Margin="10,2,0,2"/>
                                    <TextBlock Text="port" FontWeight="Bold" Grid.Row="3" Margin="0,2"/>
                                    <TextBlock Text="포트 번호 (기본: 3306)" Grid.Row="3" Grid.Column="1" Margin="10,2,0,2"/>
                                    <TextBlock Text="pwd" FontWeight="Bold" Grid.Row="4" Margin="0,2"/>
                                    <TextBlock Text="비밀번호" Grid.Row="4" Grid.Column="1" Margin="10,2,0,2"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="using MySqlConnector;&#10;&#10;// 연결 문자열&#10;string connectionString = &#10;    &quot;Server=localhost;Uid=root;Database=study;port=3306;pwd=1234&quot;;&#10;&#10;// MySqlConnection 객체 생성&#10;MySqlConnection connection = new MySqlConnection(connectionString);&#10;&#10;// 추가 옵션&#10;// CharSet=utf8mb4        : 문자 인코딩&#10;// SslMode=None           : SSL 연결 모드&#10;// ConnectionTimeout=30   : 연결 타임아웃 (초)&#10;// Pooling=true           : 연결 풀링 (기본 활성화)"/>
                    </Expander>

                    <GroupBox Header="3. 테이블 생성 (사전 준비)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="MariaDB에서 테스트용 테이블을 생성합니다:" Margin="0,0,0,10"/>
                            <Border Background="#E8F5E9" Padding="10" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="• ID: 자동 증가 기본 키" FontSize="11"/>
                                    <TextBlock Text="• Name: 이름 (VARCHAR)" FontSize="11"/>
                                    <TextBlock Text="• Age: 나이 (INT)" FontSize="11"/>
                                    <TextBlock Text="• Address: 주소 (VARCHAR)" FontSize="11"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="-- MariaDB/MySQL에서 실행&#10;&#10;-- 데이터베이스 생성&#10;CREATE DATABASE IF NOT EXISTS study;&#10;USE study;&#10;&#10;-- 테이블 생성&#10;CREATE TABLE person (&#10;    ID INT AUTO_INCREMENT PRIMARY KEY,&#10;    Name VARCHAR(100) NOT NULL,&#10;    Age INT,&#10;    Address VARCHAR(200)&#10;);&#10;&#10;-- 테스트 데이터 삽입&#10;INSERT INTO person (Name, Age, Address) VALUES&#10;('홍길동', 30, '서울시 강남구'),&#10;('김철수', 25, '부산시 해운대구'),&#10;('이영희', 28, '대구시 수성구');"/>
                    </Expander>

                    <GroupBox Header="4. 연결 문자열 보안 관리" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="실무에서는 연결 문자열을 안전하게 관리해야 합니다:" Margin="0,0,0,10"/>
                            <Border Background="#FFEBEE" Padding="10" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="⚠ 소스 코드에 하드코딩하지 말 것" FontSize="11" Foreground="#C62828"/>
                                    <TextBlock Text="⚠ Git에 커밋하지 말 것" FontSize="11" Foreground="#C62828"/>
                                    <TextBlock Text="✓ appsettings.json 또는 환경 변수 사용" FontSize="11" Foreground="#2E7D32"/>
                                    <TextBlock Text="✓ 최소 권한 원칙 (root 대신 제한된 사용자)" FontSize="11" Foreground="#2E7D32"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="// appsettings.json&#10;{&#10;    &quot;ConnectionStrings&quot;: {&#10;        &quot;MariaDB&quot;: &quot;Server=localhost;Uid=appuser;Database=study;pwd=****&quot;&#10;    }&#10;}&#10;&#10;// 환경 변수 사용&#10;string connectionString = Environment.GetEnvironmentVariable(&quot;MARIADB_CONNECTION&quot;);&#10;&#10;// User Secrets (개발 환경)&#10;// dotnet user-secrets set &quot;ConnectionStrings:MariaDB&quot; &quot;Server=...&quot;"/>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <TabItem Header="SELECT (조회)">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    <TextBlock Text="데이터 조회 (SELECT)" FontSize="22" FontWeight="Bold" Margin="0,0,0,15"/>
                    <TextBlock Text="MySqlCommand와 MySqlDataReader를 사용하여 데이터베이스에서 데이터를 조회하고 DataGrid에 표시합니다."
                               TextWrapping="Wrap" Margin="0,0,0,20"/>

                    <GroupBox Header="1. 조회 과정" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="SELECT 쿼리 실행 단계:" Margin="0,0,0,10"/>
                            <Border Background="#E3F2FD" Padding="10" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="1. DataTable 생성 (메모리 내 테이블)" FontSize="11"/>
                                    <TextBlock Text="2. MySqlCommand 생성 (SQL 명령)" FontSize="11"/>
                                    <TextBlock Text="3. Connection.Open() 연결 열기" FontSize="11"/>
                                    <TextBlock Text="4. ExecuteReader()로 데이터 읽기" FontSize="11"/>
                                    <TextBlock Text="5. DataTable.Load()로 데이터 로드" FontSize="11"/>
                                    <TextBlock Text="6. Connection.Close() 연결 닫기" FontSize="11"/>
                                    <TextBlock Text="7. DataGrid.ItemsSource에 바인딩" FontSize="11"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="private void LoadData()&#10;{&#10;    // 1. DataTable 생성&#10;    DataTable dataTable = new DataTable();&#10;    &#10;    // 2. MySqlCommand 생성&#10;    MySqlCommand command = new MySqlCommand(&#10;        &quot;SELECT * FROM person&quot;, connection);&#10;    &#10;    // 3. 연결 열기&#10;    connection.Open();&#10;    &#10;    // 4. 데이터 읽기&#10;    MySqlDataReader dataReader = command.ExecuteReader();&#10;    &#10;    // 5. DataTable에 로드&#10;    dataTable.Load(dataReader);&#10;    &#10;    // 6. 연결 닫기&#10;    connection.Close();&#10;    &#10;    // 7. DataGrid에 바인딩&#10;    Grid.ItemsSource = dataTable.DefaultView;&#10;}"/>
                    </Expander>

                    <GroupBox Header="2. MySqlDataReader 사용법" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="DataReader로 데이터를 순차적으로 읽습니다:" Margin="0,0,0,10"/>
                            <Border Background="#FFF3E0" Padding="10" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="• 순방향, 읽기 전용 데이터 스트림" FontSize="11"/>
                                    <TextBlock Text="• 메모리 효율적 (한 번에 하나의 행)" FontSize="11"/>
                                    <TextBlock Text="• 연결 유지 필요" FontSize="11"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="// DataReader로 직접 읽기&#10;while (dataReader.Read())&#10;{&#10;    int id = dataReader.GetInt32(&quot;ID&quot;);&#10;    string name = dataReader.GetString(&quot;Name&quot;);&#10;    int age = dataReader.GetInt32(&quot;Age&quot;);&#10;    string address = dataReader.GetString(&quot;Address&quot;);&#10;    &#10;    Console.WriteLine($&quot;{id}: {name}, {age}, {address}&quot;);&#10;}&#10;&#10;// null 체크&#10;if (!dataReader.IsDBNull(1))&#10;{&#10;    string name = dataReader.GetString(1);&#10;}&#10;&#10;// 인덱스로 접근&#10;int id = dataReader.GetInt32(0);  // 첫 번째 컬럼"/>
                    </Expander>

                    <GroupBox Header="3. 조건부 조회 (WHERE)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="특정 조건으로 데이터를 필터링합니다:" Margin="0,0,0,10"/>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="// 조건부 조회 (매개변수화)&#10;MySqlCommand command = new MySqlCommand(&#10;    &quot;SELECT * FROM person WHERE Age &gt; @minAge&quot;, connection);&#10;command.Parameters.AddWithValue(&quot;@minAge&quot;, 25);&#10;&#10;// 여러 조건&#10;MySqlCommand command = new MySqlCommand(&#10;    &quot;SELECT * FROM person WHERE Age &gt; @minAge AND Name LIKE @name&quot;, &#10;    connection);&#10;command.Parameters.AddWithValue(&quot;@minAge&quot;, 25);&#10;command.Parameters.AddWithValue(&quot;@name&quot;, &quot;%홍%&quot;);&#10;&#10;// 정렬&#10;&quot;SELECT * FROM person ORDER BY Age DESC&quot;&#10;&#10;// 제한&#10;&quot;SELECT * FROM person LIMIT 10&quot;"/>
                    </Expander>

                    <GroupBox Header="4. using 문 패턴 (권장)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="리소스 자동 해제를 위해 using 문을 사용합니다:" Margin="0,0,0,10"/>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="private void LoadData()&#10;{&#10;    DataTable dataTable = new DataTable();&#10;    &#10;    using (var connection = new MySqlConnection(connectionString))&#10;    using (var command = new MySqlCommand(&quot;SELECT * FROM person&quot;, connection))&#10;    {&#10;        connection.Open();&#10;        &#10;        using (var reader = command.ExecuteReader())&#10;        {&#10;            dataTable.Load(reader);&#10;        }&#10;    } // 자동으로 connection.Close() 호출&#10;    &#10;    Grid.ItemsSource = dataTable.DefaultView;&#10;}"/>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <TabItem Header="INSERT (삽입)">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    <TextBlock Text="데이터 삽입 (INSERT)" FontSize="22" FontWeight="Bold" Margin="0,0,0,15"/>
                    <TextBlock Text="매개변수화된 쿼리를 사용하여 새 데이터를 안전하게 삽입합니다. SQL Injection 방지가 핵심입니다."
                               TextWrapping="Wrap" Margin="0,0,0,20"/>

                    <GroupBox Header="1. 매개변수화된 쿼리 (필수)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="SQL Injection 공격을 방지하기 위해 반드시 매개변수를 사용합니다:" Margin="0,0,0,10"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border Background="#FFEBEE" Padding="10" Margin="0,0,5,0" CornerRadius="5">
                                    <StackPanel>
                                        <TextBlock Text="❌ 위험한 코드" FontWeight="Bold" Foreground="#C62828" Margin="0,0,0,5"/>
                                        <TextBlock Text="문자열 보간 사용" FontSize="11"/>
                                        <TextBlock Text="SQL Injection 취약" FontSize="11"/>
                                        <TextBlock Text="$&quot;INSERT ... ('{text}')&quot;" FontFamily="Consolas" FontSize="10"/>
                                    </StackPanel>
                                </Border>
                                <Border Background="#E8F5E9" Padding="10" Margin="5,0,0,0" CornerRadius="5" Grid.Column="1">
                                    <StackPanel>
                                        <TextBlock Text="✓ 안전한 코드" FontWeight="Bold" Foreground="#2E7D32" Margin="0,0,0,5"/>
                                        <TextBlock Text="매개변수 사용" FontSize="11"/>
                                        <TextBlock Text="SQL Injection 방지" FontSize="11"/>
                                        <TextBlock Text="VALUES (@name, @age)" FontFamily="Consolas" FontSize="10"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="// ❌ 위험한 코드 (SQL Injection 취약)&#10;string sql = $&quot;INSERT INTO person(Name) VALUES ('{TxtName.Text}')&quot;;&#10;&#10;// 공격 예: TxtName.Text = &quot;'; DROP TABLE person; --&quot;&#10;// 결과: person 테이블 삭제!&#10;&#10;// ✓ 안전한 코드 (매개변수화)&#10;MySqlCommand command = new MySqlCommand(&#10;    &quot;INSERT INTO person(Name, Age, Address) VALUES (@name, @age, @address)&quot;,&#10;    connection);&#10;&#10;command.Parameters.AddWithValue(&quot;@name&quot;, TxtName.Text);&#10;command.Parameters.AddWithValue(&quot;@age&quot;, TxtAge.Text);&#10;command.Parameters.AddWithValue(&quot;@address&quot;, TxtAddress.Text);"/>
                    </Expander>

                    <GroupBox Header="2. INSERT 구현 예제" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="입력 검증과 예외 처리를 포함한 완전한 예제:" Margin="0,0,0,10"/>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="private void BtnInsert_OnClick(object sender, RoutedEventArgs e)&#10;{&#10;    // 1. 입력 검증&#10;    if (string.IsNullOrWhiteSpace(TxtName.Text))&#10;    {&#10;        MessageBox.Show(&quot;이름을 입력하여 주세요.&quot;);&#10;        return;&#10;    }&#10;    &#10;    try&#10;    {&#10;        // 2. 매개변수화된 쿼리&#10;        MySqlCommand command = new MySqlCommand(&#10;            &quot;INSERT INTO person(Name, Age, Address) &quot; +&#10;            &quot;VALUES (@name, @age, @address)&quot;, connection);&#10;        &#10;        command.Parameters.AddWithValue(&quot;@name&quot;, TxtName.Text);&#10;        command.Parameters.AddWithValue(&quot;@age&quot;, TxtAge.Text);&#10;        command.Parameters.AddWithValue(&quot;@address&quot;, TxtAddress.Text);&#10;        &#10;        // 3. 실행&#10;        connection.Open();&#10;        int rows = command.ExecuteNonQuery();&#10;        &#10;        MessageBox.Show($&quot;{rows}개 행이 삽입되었습니다.&quot;);&#10;    }&#10;    catch (Exception ex)&#10;    {&#10;        MessageBox.Show($&quot;오류: {ex.Message}&quot;);&#10;    }&#10;    finally&#10;    {&#10;        connection.Close();&#10;        LoadData(); // 새로고침&#10;    }&#10;}"/>
                    </Expander>

                    <GroupBox Header="3. ExecuteNonQuery 반환값" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="데이터 변경 쿼리는 영향받은 행 수를 반환합니다:" Margin="0,0,0,10"/>
                            <Border Background="#E3F2FD" Padding="10" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="• INSERT: 삽입된 행 수 (보통 1)" FontSize="11"/>
                                    <TextBlock Text="• UPDATE: 수정된 행 수" FontSize="11"/>
                                    <TextBlock Text="• DELETE: 삭제된 행 수" FontSize="11"/>
                                    <TextBlock Text="• 0: 영향받은 행 없음" FontSize="11"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="int rowsAffected = command.ExecuteNonQuery();&#10;&#10;if (rowsAffected &gt; 0)&#10;{&#10;    MessageBox.Show($&quot;{rowsAffected}개 행이 삽입되었습니다.&quot;);&#10;}&#10;else&#10;{&#10;    MessageBox.Show(&quot;삽입 실패&quot;);&#10;}&#10;&#10;// 삽입 후 자동 생성된 ID 가져오기&#10;command.CommandText = &quot;SELECT LAST_INSERT_ID()&quot;;&#10;int newId = Convert.ToInt32(command.ExecuteScalar());"/>
                    </Expander>

                    <GroupBox Header="4. 명시적 타입 지정" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="더 안전한 매개변수 추가 방법:" Margin="0,0,0,10"/>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="// AddWithValue (간편하지만 타입 추론)&#10;command.Parameters.AddWithValue(&quot;@name&quot;, TxtName.Text);&#10;&#10;// 명시적 타입 지정 (권장)&#10;command.Parameters.Add(&quot;@name&quot;, MySqlDbType.VarChar, 100).Value = TxtName.Text;&#10;command.Parameters.Add(&quot;@age&quot;, MySqlDbType.Int32).Value = int.Parse(TxtAge.Text);&#10;&#10;// MySqlDbType 종류&#10;// VarChar: 가변 길이 문자열&#10;// Int32: 정수&#10;// DateTime: 날짜/시간&#10;// Decimal: 고정 소수점&#10;// Bit: 불린&#10;// Blob: 이진 데이터"/>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <TabItem Header="UPDATE/DELETE">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    <TextBlock Text="데이터 수정 및 삭제" FontSize="22" FontWeight="Bold" Margin="0,0,0,15"/>
                    <TextBlock Text="UPDATE와 DELETE 쿼리를 사용하여 기존 데이터를 수정하거나 삭제합니다. WHERE 절이 필수입니다."
                               TextWrapping="Wrap" Margin="0,0,0,20"/>

                    <GroupBox Header="1. UPDATE (수정)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="특정 조건에 맞는 데이터를 수정합니다:" Margin="0,0,0,10"/>
                            <Border Background="#FFEBEE" Padding="10" CornerRadius="5" Margin="0,0,0,10">
                                <TextBlock Text="⚠ WHERE 절 없이 UPDATE하면 모든 행이 수정됩니다!" FontSize="11" Foreground="#C62828"/>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="private void BtnUpdate_OnClick(object sender, RoutedEventArgs e)&#10;{&#10;    try&#10;    {&#10;        // 매개변수화된 UPDATE 쿼리&#10;        MySqlCommand command = new MySqlCommand(&#10;            &quot;UPDATE person SET Name=@name, Age=@age, Address=@address &quot; +&#10;            &quot;WHERE ID=@id&quot;, connection);&#10;        &#10;        command.Parameters.AddWithValue(&quot;@name&quot;, TxtName.Text);&#10;        command.Parameters.AddWithValue(&quot;@age&quot;, TxtAge.Text);&#10;        command.Parameters.AddWithValue(&quot;@address&quot;, TxtAddress.Text);&#10;        command.Parameters.AddWithValue(&quot;@id&quot;, TxtId.Text);&#10;        &#10;        connection.Open();&#10;        int rows = command.ExecuteNonQuery();&#10;        &#10;        if (rows &gt; 0)&#10;            MessageBox.Show(&quot;수정되었습니다.&quot;);&#10;        else&#10;            MessageBox.Show(&quot;해당 ID가 존재하지 않습니다.&quot;);&#10;    }&#10;    catch (Exception ex)&#10;    {&#10;        MessageBox.Show($&quot;오류: {ex.Message}&quot;);&#10;    }&#10;    finally&#10;    {&#10;        connection.Close();&#10;        LoadData();&#10;    }&#10;}"/>
                    </Expander>

                    <GroupBox Header="2. DELETE (삭제)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="특정 조건에 맞는 데이터를 삭제합니다:" Margin="0,0,0,10"/>
                            <Border Background="#FFEBEE" Padding="10" CornerRadius="5" Margin="0,0,0,10">
                                <StackPanel>
                                    <TextBlock Text="⚠ WHERE 절 없이 DELETE하면 모든 행이 삭제됩니다!" FontSize="11" Foreground="#C62828"/>
                                    <TextBlock Text="⚠ 삭제는 복구할 수 없습니다! 사용자 확인 권장" FontSize="11" Foreground="#C62828"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="private void BtnDelete_OnClick(object sender, RoutedEventArgs e)&#10;{&#10;    // 삭제 확인&#10;    var result = MessageBox.Show(&#10;        $&quot;ID {TxtId.Text}의 데이터를 삭제하시겠습니까?&quot;,&#10;        &quot;삭제 확인&quot;,&#10;        MessageBoxButton.YesNo,&#10;        MessageBoxImage.Question);&#10;    &#10;    if (result != MessageBoxResult.Yes) return;&#10;    &#10;    try&#10;    {&#10;        // 매개변수화된 DELETE 쿼리&#10;        MySqlCommand command = new MySqlCommand(&#10;            &quot;DELETE FROM person WHERE ID=@id&quot;, connection);&#10;        command.Parameters.AddWithValue(&quot;@id&quot;, TxtId.Text);&#10;        &#10;        connection.Open();&#10;        int rows = command.ExecuteNonQuery();&#10;        &#10;        if (rows &gt; 0)&#10;            MessageBox.Show(&quot;삭제되었습니다.&quot;);&#10;        else&#10;            MessageBox.Show(&quot;해당 ID가 존재하지 않습니다.&quot;);&#10;    }&#10;    catch (Exception ex)&#10;    {&#10;        MessageBox.Show($&quot;오류: {ex.Message}&quot;);&#10;    }&#10;    finally&#10;    {&#10;        connection.Close();&#10;        LoadData();&#10;    }&#10;}"/>
                    </Expander>

                    <GroupBox Header="3. 트랜잭션 사용" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="여러 작업을 하나의 단위로 처리합니다 (전부 성공 또는 전부 취소):" Margin="0,0,0,10"/>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="connection.Open();&#10;using (var transaction = connection.BeginTransaction())&#10;{&#10;    try&#10;    {&#10;        // 첫 번째 작업&#10;        var cmd1 = new MySqlCommand(&#10;            &quot;UPDATE accounts SET balance = balance - @amount WHERE id = @from&quot;,&#10;            connection, transaction);&#10;        cmd1.Parameters.AddWithValue(&quot;@amount&quot;, 1000);&#10;        cmd1.Parameters.AddWithValue(&quot;@from&quot;, 1);&#10;        cmd1.ExecuteNonQuery();&#10;        &#10;        // 두 번째 작업&#10;        var cmd2 = new MySqlCommand(&#10;            &quot;UPDATE accounts SET balance = balance + @amount WHERE id = @to&quot;,&#10;            connection, transaction);&#10;        cmd2.Parameters.AddWithValue(&quot;@amount&quot;, 1000);&#10;        cmd2.Parameters.AddWithValue(&quot;@to&quot;, 2);&#10;        cmd2.ExecuteNonQuery();&#10;        &#10;        // 모두 성공하면 커밋&#10;        transaction.Commit();&#10;    }&#10;    catch&#10;    {&#10;        // 실패하면 롤백&#10;        transaction.Rollback();&#10;        throw;&#10;    }&#10;}"/>
                    </Expander>

                    <GroupBox Header="4. 소프트 삭제 (Soft Delete)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="실제 삭제 대신 삭제 표시만 하는 방법 (복구 가능):" Margin="0,0,0,10"/>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="-- 테이블에 삭제 관련 컬럼 추가&#10;ALTER TABLE person ADD COLUMN IsDeleted BIT DEFAULT 0;&#10;ALTER TABLE person ADD COLUMN DeletedAt DATETIME NULL;&#10;&#10;-- 소프트 삭제 (UPDATE로 처리)&#10;UPDATE person &#10;SET IsDeleted = 1, DeletedAt = NOW() &#10;WHERE ID = @id;&#10;&#10;-- 조회 시 삭제되지 않은 것만&#10;SELECT * FROM person WHERE IsDeleted = 0;&#10;&#10;-- 장점:&#10;-- - 복구 가능&#10;-- - 감사 추적 (언제 삭제됐는지)&#10;-- - 참조 무결성 유지"/>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </TabItem>

        <TabItem Header="실전 예제">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    <TextBlock Text="CRUD 실전 예제" FontSize="22" FontWeight="Bold" Margin="0,0,0,15"/>
                    <TextBlock Text="DataGrid와 TextBox를 연동하여 데이터를 조회, 삽입, 수정, 삭제하는 완전한 예제입니다."
                               TextWrapping="Wrap" Margin="0,0,0,20"/>

                    <GroupBox Header="UI 레이아웃" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="XAML 구조:" Margin="0,0,0,10"/>
                            <Border Background="#F5F5F5" Padding="10" CornerRadius="5">
                                <Grid Height="200">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Border BorderBrush="#DDD" BorderThickness="1" Margin="0,0,5,0">
                                        <StackPanel Margin="10">
                                            <TextBlock Text="DataGrid 영역" FontWeight="Bold" Margin="0,0,0,5"/>
                                            <TextBlock Text="• 데이터 목록 표시" FontSize="11"/>
                                            <TextBlock Text="• 행 선택 시 TextBox 연동" FontSize="11"/>
                                            <TextBlock Text="• ItemsSource 바인딩" FontSize="11"/>
                                        </StackPanel>
                                    </Border>
                                    <Border BorderBrush="#DDD" BorderThickness="1" Margin="5,0,0,0" Grid.Column="1">
                                        <StackPanel Margin="10">
                                            <TextBlock Text="입력 폼 영역" FontWeight="Bold" Margin="0,0,0,5"/>
                                            <TextBlock Text="• ID, 이름, 나이, 주소 입력" FontSize="11"/>
                                            <TextBlock Text="• 삽입/수정/삭제/클리어 버튼" FontSize="11"/>
                                            <TextBlock Text="• SelectedItem 바인딩" FontSize="11"/>
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="&lt;Grid&gt;&#10;    &lt;Grid.ColumnDefinitions&gt;&#10;        &lt;ColumnDefinition Width=&quot;*&quot;/&gt;&#10;        &lt;ColumnDefinition Width=&quot;*&quot;/&gt;&#10;    &lt;/Grid.ColumnDefinitions&gt;&#10;    &#10;    &lt;!-- DataGrid --&gt;&#10;    &lt;DataGrid Name=&quot;Grid&quot; Grid.Column=&quot;0&quot;/&gt;&#10;    &#10;    &lt;!-- 입력 폼 --&gt;&#10;    &lt;Grid Grid.Column=&quot;1&quot;&gt;&#10;        &lt;Label&gt;아이디&lt;/Label&gt;&#10;        &lt;TextBox Name=&quot;TxtId&quot; &#10;                 Text=&quot;{Binding ElementName=Grid, Path=SelectedItem.ID}&quot;/&gt;&#10;        &#10;        &lt;Label&gt;이름&lt;/Label&gt;&#10;        &lt;TextBox Name=&quot;TxtName&quot; &#10;                 Text=&quot;{Binding ElementName=Grid, Path=SelectedItem.Name}&quot;/&gt;&#10;        &#10;        &lt;Button Name=&quot;BtnInsert&quot; Click=&quot;BtnInsert_OnClick&quot;&gt;삽입&lt;/Button&gt;&#10;        &lt;Button Name=&quot;BtnUpdate&quot; Click=&quot;BtnUpdate_OnClick&quot;&gt;수정&lt;/Button&gt;&#10;        &lt;Button Name=&quot;BtnDelete&quot; Click=&quot;BtnDelete_OnClick&quot;&gt;삭제&lt;/Button&gt;&#10;        &lt;Button Name=&quot;BtnClear&quot; Click=&quot;BtnClear_OnClick&quot;&gt;클리어&lt;/Button&gt;&#10;    &lt;/Grid&gt;&#10;&lt;/Grid&gt;"/>
                    </Expander>

                    <GroupBox Header="비동기 패턴 (권장)" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="UI 블로킹 방지를 위해 비동기 메서드를 사용합니다:" Margin="0,0,0,10"/>
                            <Border Background="#E8F5E9" Padding="10" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="• OpenAsync(): 비동기 연결 열기" FontSize="11"/>
                                    <TextBlock Text="• ExecuteReaderAsync(): 비동기 읽기" FontSize="11"/>
                                    <TextBlock Text="• ExecuteNonQueryAsync(): 비동기 실행" FontSize="11"/>
                                    <TextBlock Text="• UI 스레드 차단 없음" FontSize="11"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="private async Task LoadDataAsync()&#10;{&#10;    DataTable dataTable = new DataTable();&#10;    &#10;    using (var connection = new MySqlConnection(connectionString))&#10;    using (var command = new MySqlCommand(&quot;SELECT * FROM person&quot;, connection))&#10;    {&#10;        await connection.OpenAsync();&#10;        &#10;        using (var reader = await command.ExecuteReaderAsync())&#10;        {&#10;            dataTable.Load(reader);&#10;        }&#10;    }&#10;    &#10;    Grid.ItemsSource = dataTable.DefaultView;&#10;}&#10;&#10;// 호출&#10;private async void Window_Loaded(object sender, RoutedEventArgs e)&#10;{&#10;    await LoadDataAsync();&#10;}"/>
                    </Expander>

                    <GroupBox Header="모범 사례 체크리스트" Margin="0,0,0,15" Padding="10">
                        <StackPanel>
                            <TextBlock Text="데이터베이스 연동 시 확인사항:" Margin="0,0,0,10"/>
                            <Border Background="#F5F5F5" Padding="10" CornerRadius="5">
                                <StackPanel>
                                    <TextBlock Text="✓ 매개변수화된 쿼리 사용 (SQL Injection 방지)" Margin="0,2"/>
                                    <TextBlock Text="✓ using 문으로 리소스 자동 해제" Margin="0,2"/>
                                    <TextBlock Text="✓ 비동기 메서드 사용 (UI 블로킹 방지)" Margin="0,2"/>
                                    <TextBlock Text="✓ try-catch-finally로 예외 처리" Margin="0,2"/>
                                    <TextBlock Text="✓ 연결 문자열 보안 관리" Margin="0,2"/>
                                    <TextBlock Text="✓ 입력 값 검증" Margin="0,2"/>
                                    <TextBlock Text="✓ 삭제 전 사용자 확인" Margin="0,2"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    <Expander Style="{StaticResource CodeExpanderStyle}">
                        <TextBox Style="{StaticResource CodeTextBoxStyle}"
                                 Text="// 완전한 패턴 예제&#10;private async Task InsertAsync()&#10;{&#10;    // 1. 입력 검증&#10;    if (string.IsNullOrWhiteSpace(TxtName.Text))&#10;    {&#10;        MessageBox.Show(&quot;이름을 입력하세요.&quot;);&#10;        return;&#10;    }&#10;    &#10;    // 2. using + 비동기 + 매개변수화&#10;    using (var conn = new MySqlConnection(connectionString))&#10;    using (var cmd = new MySqlCommand(&#10;        &quot;INSERT INTO person(Name, Age, Address) VALUES (@n, @a, @addr)&quot;, conn))&#10;    {&#10;        cmd.Parameters.AddWithValue(&quot;@n&quot;, TxtName.Text);&#10;        cmd.Parameters.AddWithValue(&quot;@a&quot;, int.Parse(TxtAge.Text));&#10;        cmd.Parameters.AddWithValue(&quot;@addr&quot;, TxtAddress.Text);&#10;        &#10;        try&#10;        {&#10;            await conn.OpenAsync();&#10;            await cmd.ExecuteNonQueryAsync();&#10;            MessageBox.Show(&quot;삽입 완료&quot;);&#10;        }&#10;        catch (MySqlException ex)&#10;        {&#10;            MessageBox.Show($&quot;DB 오류: {ex.Message}&quot;);&#10;        }&#10;    }&#10;    &#10;    await LoadDataAsync();&#10;}"/>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </TabItem>
    </TabControl>
</Window>
