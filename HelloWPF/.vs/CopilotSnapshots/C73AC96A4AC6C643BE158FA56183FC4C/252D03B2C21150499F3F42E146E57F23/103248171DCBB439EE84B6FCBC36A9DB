<!-- 
    ch17 그리드 - WPF Grid 레이아웃 컨트롤의 다양한 기능을 보여주는 예제 파일
    Grid는 WPF에서 가장 강력하고 유연한 레이아웃 컨트롤로, 행(Row)과 열(Column)을 
    정의하여 복잡한 레이아웃을 구성할 수 있습니다. HTML의 Table과 유사하지만 훨씬 강력합니다.
-->
<Window x:Class="ch17_그리드.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ch17_그리드"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    
    <!-- 
        Grid: 행과 열로 구성된 레이아웃 컨트롤
        가장 많이 사용되는 레이아웃 패널
    -->
    <Grid>
        <!-- 
            Grid 기본 개념:
            - 행(Row)과 열(Column)의 테이블 구조
            - 각 셀에 하나 이상의 요소 배치 가능
            - 요소들이 겹쳐서 배치될 수 있음
            - 셀 병합 가능 (RowSpan, ColumnSpan)
            - 유연한 크기 조정 (Auto, *, 고정 값)
            
            Grid vs HTML Table:
            - Grid: 레이아웃 목적, 유연한 크기 조정, 중첩 가능
            - Table: 데이터 표시 목적, 고정된 구조
            
            Grid의 주요 구성요소:
            1. ColumnDefinitions: 열 정의
            2. RowDefinitions: 행 정의
            3. 자식 요소: Grid.Row, Grid.Column 첨부 속성으로 위치 지정
        -->
        
        <!-- 
            ColumnDefinitions: 열(세로 구분) 정의
            열의 개수와 각 열의 너비를 지정합니다.
        -->
        <Grid.ColumnDefinitions>
            <!-- 
                ColumnDefinition: 각 열의 속성 정의
                Width 속성으로 열의 너비 지정
            -->
            <ColumnDefinition Width="Auto"/>
            <!-- 
                Width="Auto":
                - 해당 열의 내용에 맞춰 자동으로 크기 조정
                - 콘텐츠가 필요로 하는 최소 크기만 차지
                - 가장 큰 자식 요소의 크기에 맞춰짐
                
                예: 버튼 3개가 있고 가장 큰 것이 100px이면 열도 100px
            -->
            
            <ColumnDefinition Width="1*"/>
            <!-- 
                Width="1*" (비례 크기, Star Sizing):
                - 남은 공간을 비율로 분배
                - * 앞의 숫자가 비율
                - 1*은 남은 공간의 1/3 (총 1* + 2* = 3*)
                
                계산 방법:
                1. Auto 열의 크기 계산 (콘텐츠 크기)
                2. 남은 공간 = 전체 너비 - Auto 열 너비
                3. 1* = 남은 공간 × (1 / (1 + 2))
                
                예: 전체 800px, Auto가 100px이면
                남은 공간 = 700px
                1* = 700 × (1/3) = 233.33px
            -->
            
            <ColumnDefinition Width="2*"/>
            <!-- 
                Width="2*":
                - 남은 공간의 2/3 차지
                - 1* 열의 2배 크기
                - 2* = 700 × (2/3) = 466.67px
                
                비례 크기의 장점:
                - 창 크기 변경 시 자동으로 비율 유지
                - 반응형 레이아웃에 최적
                - 남은 공간을 효율적으로 분배
                
                다른 Width 옵션:
                - 고정 값: Width="200" (200픽셀 고정)
                - Auto: Width="Auto" (콘텐츠 크기)
                - *: Width="*" (1*과 동일)
                - MinWidth/MaxWidth: 최소/최대 너비 제한
            -->
        </Grid.ColumnDefinitions>
        
        <!-- 
            RowDefinitions: 행(가로 구분) 정의
            행의 개수와 각 행의 높이를 지정합니다.
        -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 
                Height="Auto":
                - 해당 행의 내용에 맞춰 자동으로 높이 조정
                - 가장 큰 자식 요소의 높이에 맞춰짐
            -->
            
            <RowDefinition Height="1*"/>
            <!-- 
                Height="1*":
                - 남은 공간의 1/3 차지 (총 1* + 2* = 3*)
                - 세로 방향의 비례 크기
            -->
            
            <RowDefinition Height="2*"/>
            <!-- 
                Height="2*":
                - 남은 공간의 2/3 차지
                - 1* 행의 2배 높이
                
                현재 Grid 구조 시각화:
                ┌───────┬─────────┬─────────────┐
                │ Auto  │   1*    │     2*      │ ← Auto 높이
                ├───────┼─────────┼─────────────┤
                │       │         │             │
                │       │         │             │ ← 1* 높이
                ├───────┼─────────┼─────────────┤
                │       │         │             │
                │       │         │             │
                │       │         │             │ ← 2* 높이
                └───────┴─────────┴─────────────┘
                  Auto     1*          2*
            -->
        </Grid.RowDefinitions>
        
        <!-- 
            Grid에 버튼 배치
            Grid.Row와 Grid.Column 첨부 속성으로 위치 지정
        -->
        
        <!-- 첫 번째 버튼: 2개 열을 병합 -->
        <Button Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2">버튼1</Button>
        <!-- 
            Grid 첨부 속성:
            
            Grid.Row="0":
            - 첫 번째 행(0번 인덱스)에 배치
            - 인덱스는 0부터 시작
            - 생략 시 기본값 0
            
            Grid.Column="0":
            - 첫 번째 열(0번 인덱스)에 배치
            - 생략 시 기본값 0
            
            Grid.ColumnSpan="2":
            - 2개의 열을 걸쳐서 배치 (열 병합)
            - 0번 열과 1번 열을 차지
            - HTML의 colspan과 유사
            
            결과:
            ┌─────────────────┬─────────────┐
            │     버튼1       │             │
            │  (2열 병합)     │             │
            └─────────────────┴─────────────┘
            
            ColumnSpan 사용 시나리오:
            - 제목이나 헤더를 여러 열에 걸쳐 표시
            - 넓은 입력 필드
            - 전체 너비 버튼
        -->
        
        <!-- 두 번째 버튼 (주석 처리됨) -->
        <!--<Button Grid.Row="0" Grid.Column="1">버튼2</Button>-->
        <!-- 
            주석 처리된 이유:
            - 버튼1이 ColumnSpan="2"로 0번과 1번 열을 차지하므로
            - 1번 열에 버튼2를 배치하면 버튼1과 겹침
            - Grid는 겹치는 배치를 허용하지만, 여기서는 의도적으로 제외
            
            만약 주석을 해제하면:
            - 버튼1과 버튼2가 겹쳐서 표시됨
            - 나중에 선언된 버튼2가 위에 표시됨 (Z-Order)
        -->
        
        <!-- 세 번째 버튼 -->
        <Button Grid.Row="0" Grid.Column="2">버튼3</Button>
        <!-- 
            Grid.Row="0" Grid.Column="2":
            - 첫 번째 행, 세 번째 열에 배치
            - 독립적인 셀 차지
            
            현재까지 결과:
            ┌─────────────────┬─────────────┐
            │     버튼1       │   버튼3     │ ← Row 0
            │  (0,0~1)       │   (0,2)     │
            └─────────────────┴─────────────┘
        -->
        
        <!-- 두 번째 행의 버튼들 -->
        <Button Grid.Row="1" Grid.Column="0">버튼1</Button>
        <!-- 
            Grid.Row="1" Grid.Column="0":
            - 두 번째 행, 첫 번째 열
            - (1, 0) 위치
        -->
        
        <Button Grid.Row="1" Grid.Column="1">버튼2</Button>
        <!-- 
            Grid.Row="1" Grid.Column="1":
            - 두 번째 행, 두 번째 열
            - (1, 1) 위치
        -->
        
        <Button Grid.Row="1" Grid.Column="2">버튼3</Button>
        <!-- 
            Grid.Row="1" Grid.Column="2":
            - 두 번째 행, 세 번째 열
            - (1, 2) 위치
            
            현재까지 결과:
            ┌───────┬─────────┬─────────────┐
            │버튼1  │  버튼1  │   버튼3     │ ← Row 0
            ├───────┴─────────┼─────────────┤
            │버튼1  │버튼2    │   버튼3     │ ← Row 1
            └───────┴─────────┴─────────────┘
        -->
        
        <!-- 세 번째 행의 버튼들 (첫 번째 열 비어있음) -->
        <Button Grid.Row="2" Grid.Column="1">버튼2</Button>
        <!-- 
            Grid.Row="2" Grid.Column="1":
            - 세 번째 행, 두 번째 열
            - (2, 1) 위치
            - (2, 0)은 비어있음 (요소 배치 안 함)
        -->
        
        <Button Grid.Row="2" Grid.Column="2">버튼3</Button>
        <!-- 
            Grid.Row="2" Grid.Column="2":
            - 세 번째 행, 세 번째 열
            - (2, 2) 위치
            
            최종 결과:
            ┌───────┬─────────┬─────────────┐
            │버튼1           │   버튼3     │ ← Row 0 (Auto 높이)
            ├───────┼─────────┼─────────────┤
            │버튼1  │버튼2    │   버튼3     │ ← Row 1 (1* 높이)
            ├───────┼─────────┼─────────────┤
            │(비어  │버튼2    │   버튼3     │ ← Row 2 (2* 높이)
            │있음)  │         │             │
            └───────┴─────────┴─────────────┘
              Auto     1*          2*
            
            빈 셀:
            - (2, 0) 셀은 요소가 없지만 공간은 존재
            - Grid는 빈 셀을 허용
            - 나중에 동적으로 요소 추가 가능
        -->
    </Grid>
    
    <!--
        Grid 추가 유용한 기능:
        
        1. RowSpan (행 병합):
           <Button Grid.Row="0" Grid.RowSpan="2">
               두 행을 걸쳐서 배치
           </Button>
           
           예제:
           ┌───────┬─────────┐
           │       │  버튼2  │
           │버튼1  ├─────────┤
           │(2행   │  버튼3  │
           │병합)  │         │
           └───────┴─────────┘
        
        2. RowSpan과 ColumnSpan 동시 사용:
           <Button Grid.Row="0" Grid.Column="0" 
                   Grid.RowSpan="2" Grid.ColumnSpan="2">
               여러 행과 열을 걸쳐서 배치
           </Button>
           
           예제:
           ┌───────────────┬─────┐
           │               │버튼2│
           │    버튼1      ├─────┤
           │  (2×2 병합)   │버튼3│
           ├───────────────┼─────┤
           │버튼4          │버튼5│
           └───────────────┴─────┘
        
        3. 다양한 크기 지정 방법:
           
           고정 크기:
           <ColumnDefinition Width="200"/>
           <RowDefinition Height="100"/>
           
           Auto (콘텐츠에 맞춤):
           <ColumnDefinition Width="Auto"/>
           <RowDefinition Height="Auto"/>
           
           비례 크기 (Star):
           <ColumnDefinition Width="*"/>     <!-- 1*과 동일 -->
           <ColumnDefinition Width="2*"/>    <!-- 2배 -->
           <ColumnDefinition Width="3*"/>    <!-- 3배 -->
           
           최소/최대 크기:
           <ColumnDefinition Width="*" MinWidth="100" MaxWidth="500"/>
           <RowDefinition Height="*" MinHeight="50" MaxHeight="300"/>
        
        4. ShowGridLines (디버깅용):
           <Grid ShowGridLines="True">
               <!-- Grid 선을 표시하여 레이아웃 확인 -->
           </Grid>
           
           주의: 디버그 용도로만 사용, 프로덕션에서는 제거
        
        실전 활용 예제:
        
        1. 로그인 폼:
           <Grid>
               <Grid.RowDefinitions>
                   <RowDefinition Height="Auto"/>
                   <RowDefinition Height="Auto"/>
                   <RowDefinition Height="Auto"/>
               </Grid.RowDefinitions>
               <Grid.ColumnDefinitions>
                   <ColumnDefinition Width="Auto"/>
                   <ColumnDefinition Width="*"/>
               </Grid.ColumnDefinitions>
               
               <Label Grid.Row="0" Grid.Column="0">아이디:</Label>
               <TextBox Grid.Row="0" Grid.Column="1"/>
               
               <Label Grid.Row="1" Grid.Column="0">비밀번호:</Label>
               <PasswordBox Grid.Row="1" Grid.Column="1"/>
               
               <Button Grid.Row="2" Grid.Column="0" 
                       Grid.ColumnSpan="2">로그인</Button>
           </Grid>
        
        2. 계산기 레이아웃:
           <Grid>
               <Grid.RowDefinitions>
                   <RowDefinition Height="Auto"/>
                   <RowDefinition Height="*"/>
                   <RowDefinition Height="*"/>
                   <RowDefinition Height="*"/>
                   <RowDefinition Height="*"/>
               </Grid.RowDefinitions>
               <Grid.ColumnDefinitions>
                   <ColumnDefinition Width="*"/>
                   <ColumnDefinition Width="*"/>
                   <ColumnDefinition Width="*"/>
                   <ColumnDefinition Width="*"/>
               </Grid.ColumnDefinitions>
               
               <TextBox Grid.Row="0" Grid.ColumnSpan="4"/>
               <Button Grid.Row="1" Grid.Column="0">7</Button>
               <Button Grid.Row="1" Grid.Column="1">8</Button>
               <!-- 더 많은 버튼들... -->
           </Grid>
        
        3. 마스터-디테일 레이아웃:
           <Grid>
               <Grid.ColumnDefinitions>
                   <ColumnDefinition Width="200"/>
                   <ColumnDefinition Width="5"/>
                   <ColumnDefinition Width="*"/>
               </Grid.ColumnDefinitions>
               
               <ListBox Grid.Column="0"/>
               <GridSplitter Grid.Column="1" 
                            HorizontalAlignment="Stretch"/>
               <ContentPresenter Grid.Column="2"/>
           </Grid>
        
        4. 대시보드 레이아웃:
           <Grid>
               <Grid.RowDefinitions>
                   <RowDefinition Height="*"/>
                   <RowDefinition Height="*"/>
               </Grid.RowDefinitions>
               <Grid.ColumnDefinitions>
                   <ColumnDefinition Width="*"/>
                   <ColumnDefinition Width="*"/>
               </Grid.ColumnDefinitions>
               
               <Border Grid.Row="0" Grid.Column="0">
                   <!-- 위젯 1 -->
               </Border>
               <Border Grid.Row="0" Grid.Column="1">
                   <!-- 위젯 2 -->
               </Border>
               <Border Grid.Row="1" Grid.Column="0">
                   <!-- 위젯 3 -->
               </Border>
               <Border Grid.Row="1" Grid.Column="1">
                   <!-- 위젯 4 -->
               </Border>
           </Grid>
        
        5. 복잡한 폼:
           <Grid Margin="10">
               <Grid.RowDefinitions>
                   <RowDefinition Height="Auto"/>
                   <RowDefinition Height="Auto"/>
                   <RowDefinition Height="Auto"/>
                   <RowDefinition Height="*"/>
                   <RowDefinition Height="Auto"/>
               </Grid.RowDefinitions>
               <Grid.ColumnDefinitions>
                   <ColumnDefinition Width="Auto"/>
                   <ColumnDefinition Width="*"/>
                   <ColumnDefinition Width="Auto"/>
                   <ColumnDefinition Width="*"/>
               </Grid.ColumnDefinitions>
               
               <Label Grid.Row="0" Grid.Column="0">이름:</Label>
               <TextBox Grid.Row="0" Grid.Column="1"/>
               <Label Grid.Row="0" Grid.Column="2">나이:</Label>
               <TextBox Grid.Row="0" Grid.Column="3"/>
               
               <Label Grid.Row="1" Grid.Column="0">이메일:</Label>
               <TextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3"/>
               
               <Label Grid.Row="2" Grid.Column="0">주소:</Label>
               <TextBox Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"/>
               
               <Label Grid.Row="3" Grid.Column="0">메모:</Label>
               <TextBox Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3"
                        AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
               
               <StackPanel Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="4"
                          Orientation="Horizontal" HorizontalAlignment="Right">
                   <Button Margin="5">저장</Button>
                   <Button Margin="5">취소</Button>
               </StackPanel>
           </Grid>
        
        Grid의 장단점:
        
        장점:
        - 가장 유연하고 강력한 레이아웃 컨트롤
        - 복잡한 레이아웃을 정확하게 구성 가능
        - 반응형 디자인에 최적 (비례 크기)
        - 중첩 사용으로 무한한 가능성
        - 행/열 병합으로 다양한 구조 표현
        
        단점:
        - 간단한 레이아웃에는 과도할 수 있음
        - XAML 코드가 길어질 수 있음
        - 많은 행/열은 성능에 영향
        
        다른 레이아웃 패널과의 비교:
        
        Grid vs StackPanel:
        - Grid: 2차원 배치, 정확한 위치 제어
        - StackPanel: 1차원 순차 배치, 간단함
        
        Grid vs DockPanel:
        - Grid: 정확한 행/열 배치
        - DockPanel: 가장자리 고정 배치
        
        Grid vs Canvas:
        - Grid: 반응형, 자동 크기 조정
        - Canvas: 고정 위치, 절대 좌표
        
        성능 팁:
        - 불필요한 중첩 피하기
        - Auto는 측정 비용이 높으므로 필요한 곳에만 사용
        - 많은 자식 요소는 VirtualizingPanel 고려
        - SharedSizeGroup으로 여러 Grid의 크기 동기화
        
        SharedSizeGroup 예제:
        <Grid Grid.IsSharedSizeScope="True">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition SharedSizeGroup="A"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
            </Grid>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition SharedSizeGroup="A"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
            </Grid>
        </Grid>
        
        Z-Order (겹침 순서):
        - 같은 셀에 여러 요소가 있으면 나중에 선언된 것이 위에 표시
        - Panel.ZIndex 첨부 속성으로 명시적 지정 가능
        
        예제:
        <Button Grid.Row="0" Grid.Column="0" Panel.ZIndex="1">뒤</Button>
        <Button Grid.Row="0" Grid.Column="0" Panel.ZIndex="2">앞</Button>
    -->
</Window>
