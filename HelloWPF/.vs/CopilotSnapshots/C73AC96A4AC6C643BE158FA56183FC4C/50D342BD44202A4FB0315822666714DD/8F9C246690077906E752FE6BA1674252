<!-- 
    ch15 랩패널 - WPF WrapPanel 레이아웃 컨트롤의 기능을 보여주는 예제 파일
    WrapPanel은 자식 요소들을 한 방향으로 배치하되, 공간이 부족하면 자동으로 다음 줄(또는 열)로 
    넘어가는 레이아웃 컨트롤입니다. StackPanel과 유사하지만 자동 줄바꿈 기능이 있습니다.
-->
<Window x:Class="ch15_랩패널.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ch15_랩패널"
        mc:Ignorable="d"
        Title="MainWindow" Height="300" Width="300">
    <!-- 
        Window 크기 설정:
        Height="300" Width="300": 
        - 창의 크기를 300x300 픽셀로 설정
        - 작은 창 크기로 WrapPanel의 자동 줄바꿈 효과를 명확히 보여줌
        - 창 크기를 조절하면 버튼들의 배치가 동적으로 변경됨
    -->
    <Grid>
        <!-- 
            예제: 세로 방향 WrapPanel (Vertical)
            자식 요소들을 위에서 아래로 배치하되, 높이가 부족하면 다음 열로 자동 이동합니다.
        -->
        <WrapPanel Orientation="Vertical">
            <!-- 
                WrapPanel 기본 개념:
                - Panel의 한 종류로 자식 요소들을 배치하는 레이아웃 컨트롤
                - StackPanel과 유사하지만 중요한 차이점이 있음
                - 자동 줄바꿈(Wrapping) 기능 제공
                
                StackPanel vs WrapPanel:
                
                StackPanel:
                - 한 방향으로만 무한정 배치
                - 공간이 부족하면 화면 밖으로 나감
                - ScrollViewer 필요
                ┌─────────┐
                │ 요소 1  │
                │ 요소 2  │
                │ 요소 3  │
                │ 요소 4  │
                │ 요소 5  │ ← 화면 밖으로 나갈 수 있음
                └─────────┘
                
                WrapPanel:
                - 공간이 부족하면 자동으로 다음 줄/열로 이동
                - 반응형 레이아웃에 유용
                - 창 크기에 따라 자동 재배치
                ┌─────────────────┐
                │ 요소1 요소2 요소3│
                │ 요소4 요소5     │ ← 자동 줄바꿈
                └─────────────────┘
                
                Orientation="Vertical":
                - 세로 방향 배치 (위→아래)
                - 높이가 부족하면 오른쪽 열로 이동
                - ItemHeight 속성으로 각 항목의 높이 제어 가능
                
                시각적 표현 (Vertical, Height=300):
                ┌────┬────┬────┐
                │버튼1│버튼5│    │
                │버튼2│버튼6│    │
                │버튼3│버튼7│    │
                │버튼4│    │    │
                └────┴────┴────┘
                ↑ 높이가 부족하면 다음 열로
                
                만약 Orientation="Horizontal"이었다면:
                ┌─────────────────┐
                │버튼1 버튼2 버튼3 │
                │버튼4 버튼5 버튼6 │ ← 너비가 부족하면 다음 행으로
                │버튼7            │
                └─────────────────┘
            -->
            
            <!-- 7개의 버튼을 세로 WrapPanel에 배치 -->
            <Button Width="100">버튼</Button>
            <!-- 
                Width="100": 
                - 각 버튼의 너비를 100픽셀로 고정
                - WrapPanel에서 명시적 크기 지정이 중요함
                - Width를 지정하지 않으면 콘텐츠 크기에 맞춰짐
                
                Vertical WrapPanel의 동작:
                1. 첫 번째 버튼이 맨 위에 배치됨
                2. 두 번째 버튼이 그 아래에 배치됨
                3. 높이가 부족하면 다음 열(오른쪽)로 이동
                4. 각 열의 너비는 가장 넓은 항목에 맞춰짐
            -->
            <Button Width="100">버튼</Button>
            <Button Width="100">버튼</Button>
            <Button Width="100">버튼</Button>
            <Button Width="100">버튼</Button>
            <Button Width="100">버튼</Button>
            <Button Width="100">버튼</Button>
            <!-- 
                창 크기 변경 시 동작:
                - 창을 세로로 늘리면: 한 열에 더 많은 버튼이 들어감
                - 창을 세로로 줄이면: 더 적은 버튼만 들어가고 나머지는 다음 열로
                - 창을 가로로 변경해도: 각 열의 너비만 영향받음 (Vertical이므로)
                
                예시 (Height=200일 때):
                ┌────┬────┐
                │버튼1│버튼4│
                │버튼2│버튼5│
                │버튼3│버튼6│
                │    │버튼7│
                └────┴────┘
                
                예시 (Height=400일 때):
                ┌────┬────┐
                │버튼1│    │
                │버튼2│    │
                │버튼3│    │
                │버튼4│    │
                │버튼5│    │
                │버튼6│    │
                │버튼7│    │
                └────┴────┘
            -->
            
            <!-- 
                내부 WrapPanel (중첩 구조 예제)
                WrapPanel 안에 또 다른 WrapPanel을 배치할 수 있습니다.
            -->
            <WrapPanel>
                <!-- 
                    이 WrapPanel은 Orientation이 지정되지 않았으므로 기본값인 Horizontal 사용
                    Orientation="Horizontal" (기본값):
                    - 왼쪽에서 오른쪽으로 배치
                    - 너비가 부족하면 다음 행으로 이동
                -->
                
                <!-- StackPanel을 WrapPanel의 자식으로 배치 -->
                <StackPanel>
                    <!-- 
                        StackPanel 안에 Grid를 배치
                        이런 중첩 구조는 실제로는 잘 사용되지 않지만, 
                        레이아웃의 유연성을 보여주는 예제입니다.
                    -->
                    <Grid>
                        <!-- 
                            빈 Grid:
                            - 현재는 비어있지만 여기에 다양한 콘텐츠를 배치할 수 있음
                            - 복잡한 레이아웃 구성의 예시
                            
                            실제 사용 예:
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <TextBlock Grid.Row="0" Text="제목"/>
                                <TextBlock Grid.Row="1" Text="내용"/>
                            </Grid>
                        -->
                    </Grid>
                </StackPanel>
            </WrapPanel>
        </WrapPanel>
    </Grid>
    
    <!--
        WrapPanel 추가 유용한 속성:
        
        1. Orientation (방향):
           - Horizontal: 가로 방향, 너비 부족 시 다음 행으로 (기본값)
           - Vertical: 세로 방향, 높이 부족 시 다음 열로
           
           예제:
           <WrapPanel Orientation="Horizontal">
               <!-- 가로로 배치, 자동 줄바꿈 -->
           </WrapPanel>
        
        2. ItemWidth (항목 너비):
           - 모든 자식 요소의 너비를 동일하게 설정
           - 개별 Width 속성보다 우선함
           
           예제:
           <WrapPanel ItemWidth="150">
               <Button>버튼1</Button> <!-- 모두 150px 너비 -->
               <Button>버튼2</Button>
           </WrapPanel>
        
        3. ItemHeight (항목 높이):
           - 모든 자식 요소의 높이를 동일하게 설정
           - 개별 Height 속성보다 우선함
           
           예제:
           <WrapPanel ItemHeight="50">
               <Button>버튼1</Button> <!-- 모두 50px 높이 -->
               <Button>버튼2</Button>
           </WrapPanel>
        
        4. Background (배경색):
           예제:
           <WrapPanel Background="LightGray">
           </WrapPanel>
        
        실전 활용 예제:
        
        1. 태그 목록 (Chip/Tag Display):
           <WrapPanel Orientation="Horizontal">
               <Border Background="LightBlue" 
                       CornerRadius="10" 
                       Padding="10,5" 
                       Margin="5">
                   <TextBlock Text="C#"/>
               </Border>
               <Border Background="LightGreen" 
                       CornerRadius="10" 
                       Padding="10,5" 
                       Margin="5">
                   <TextBlock Text="WPF"/>
               </Border>
               <Border Background="LightCoral" 
                       CornerRadius="10" 
                       Padding="10,5" 
                       Margin="5">
                   <TextBlock Text=".NET"/>
               </Border>
               <!-- 자동으로 줄바꿈됨 -->
           </WrapPanel>
        
        2. 이미지 갤러리:
           <WrapPanel ItemWidth="150" ItemHeight="150">
               <Image Source="image1.jpg" Stretch="UniformToFill"/>
               <Image Source="image2.jpg" Stretch="UniformToFill"/>
               <Image Source="image3.jpg" Stretch="UniformToFill"/>
               <Image Source="image4.jpg" Stretch="UniformToFill"/>
               <!-- 창 크기에 따라 자동 재배치 -->
           </WrapPanel>
        
        3. 제품 카드 그리드:
           <WrapPanel ItemWidth="200" ItemHeight="250">
               <Border BorderBrush="Gray" BorderThickness="1" Margin="5">
                   <StackPanel>
                       <Image Source="product1.jpg" Height="150"/>
                       <TextBlock Text="제품명" FontWeight="Bold"/>
                       <TextBlock Text="₩50,000"/>
                       <Button Content="구매"/>
                   </StackPanel>
               </Border>
               <!-- 더 많은 제품 카드들 -->
           </WrapPanel>
        
        4. 아이콘 툴바:
           <WrapPanel Orientation="Horizontal">
               <Button Width="40" Height="40" Margin="2">
                   <Image Source="save.png"/>
               </Button>
               <Button Width="40" Height="40" Margin="2">
                   <Image Source="open.png"/>
               </Button>
               <Button Width="40" Height="40" Margin="2">
                   <Image Source="print.png"/>
               </Button>
               <!-- 공간에 따라 자동 줄바꿈 -->
           </WrapPanel>
        
        5. 필터 칩 (검색 필터):
           <StackPanel>
               <Label>선택된 필터:</Label>
               <WrapPanel x:Name="filterPanel">
                   <!-- 동적으로 필터 칩 추가 -->
               </WrapPanel>
           </StackPanel>
           
           C#:
           private void AddFilter(string filterName)
           {
               Border chip = new Border
               {
                   Background = new SolidColorBrush(Colors.LightBlue),
                   CornerRadius = new CornerRadius(15),
                   Padding = new Thickness(10, 5, 10, 5),
                   Margin = new Thickness(5)
               };
               
               StackPanel panel = new StackPanel 
               { 
                   Orientation = Orientation.Horizontal 
               };
               
               panel.Children.Add(new TextBlock { Text = filterName });
               
               Button closeButton = new Button
               {
                   Content = "×",
                   Background = Brushes.Transparent,
                   BorderThickness = new Thickness(0)
               };
               closeButton.Click += (s, e) => filterPanel.Children.Remove(chip);
               panel.Children.Add(closeButton);
               
               chip.Child = panel;
               filterPanel.Children.Add(chip);
           }
        
        6. 반응형 버튼 메뉴:
           <WrapPanel Orientation="Horizontal" 
                      HorizontalAlignment="Center">
               <Button Margin="5" Padding="15,5">홈</Button>
               <Button Margin="5" Padding="15,5">제품</Button>
               <Button Margin="5" Padding="15,5">서비스</Button>
               <Button Margin="5" Padding="15,5">회사소개</Button>
               <Button Margin="5" Padding="15,5">연락처</Button>
           </WrapPanel>
        
        WrapPanel의 장단점:
        
        장점:
        - 자동 줄바꿈으로 반응형 레이아웃 구현
        - 창 크기 변경에 자동으로 적응
        - 태그, 칩, 갤러리 등에 최적
        - 간단한 사용법
        
        단점:
        - 복잡한 정렬 제어 어려움
        - 행/열 높이가 불균일할 수 있음
        - 많은 항목 시 성능 저하 가능
        - 가상화 지원 안 함
        
        다른 레이아웃 패널과의 비교:
        
        WrapPanel vs StackPanel:
        - WrapPanel: 자동 줄바꿈
        - StackPanel: 한 방향으로만 무한정
        
        WrapPanel vs Grid:
        - WrapPanel: 자동 배치, 간단함
        - Grid: 정확한 위치 제어, 복잡함
        
        WrapPanel vs UniformGrid:
        - WrapPanel: 콘텐츠 크기에 맞춤
        - UniformGrid: 모든 셀이 동일 크기
        
        성능 팁:
        - 많은 항목은 VirtualizingWrapPanel 사용 고려 (타사 라이브러리)
        - ItemWidth/ItemHeight 사용으로 레이아웃 계산 최적화
        - 동적 추가 시 BeginInit/EndInit 사용
        
        동적으로 요소 추가/제거:
        
        C#:
        // 요소 추가
        myWrapPanel.Children.Add(new Button { Content = "새 버튼" });
        
        // 요소 제거
        myWrapPanel.Children.RemoveAt(0);
        
        // 모든 요소 제거
        myWrapPanel.Children.Clear();
        
        반응형 디자인 팁:
        - ItemWidth/ItemHeight로 일관된 크기 유지
        - Margin으로 적절한 간격 설정
        - MinWidth/MaxWidth로 크기 제한
        
        예제 - 반응형 카드:
        <WrapPanel ItemWidth="250">
            <Border Margin="10" 
                    BorderBrush="Gray" 
                    BorderThickness="1"
                    MaxWidth="300">
                <StackPanel>
                    <Image/>
                    <TextBlock/>
                </StackPanel>
            </Border>
        </WrapPanel>
        
        ScrollViewer와 함께 사용:
        <ScrollViewer>
            <WrapPanel>
                <!-- 많은 항목들 -->
            </WrapPanel>
        </ScrollViewer>
        
        주의: WrapPanel은 자동으로 크기를 측정하므로
        ScrollViewer 안에서는 HorizontalScrollBarVisibility="Disabled" 
        또는 VerticalScrollBarVisibility="Disabled" 설정이 필요할 수 있습니다.
    -->
</Window>
