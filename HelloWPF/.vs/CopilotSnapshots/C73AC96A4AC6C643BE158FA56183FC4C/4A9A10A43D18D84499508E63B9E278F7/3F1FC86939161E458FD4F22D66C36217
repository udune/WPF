<!-- 
    ch10 캘린더 - WPF Calendar 컨트롤의 다양한 기능을 보여주는 예제 파일
    Calendar는 날짜를 선택할 수 있는 달력 컨트롤로, 월/년/10년 단위로 표시 모드를 변경할 수 있으며,
    특정 날짜를 비활성화(BlackoutDates)하거나 데이터 바인딩을 통해 선택된 날짜를 표시할 수 있습니다.
-->
<Window x:Class="ch10_캘린더.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ch10_캘린더"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    <Grid>
        <StackPanel>
            <!-- 
                첫 번째 StackPanel: 3개의 Calendar를 가로로 나란히 배치
                서로 다른 DisplayMode를 보여주는 예제
            -->
            <StackPanel Orientation="Horizontal">
                <!-- 
                    예제 1: Decade (10년 단위) 표시 모드
                    10년 범위의 연도들을 표시하여 사용자가 연도를 선택할 수 있습니다.
                -->
                <Calendar DisplayMode="Decade"></Calendar>
                <!-- 
                    DisplayMode="Decade":
                    - 10년 단위로 연도를 표시 (예: 2020-2029)
                    - 사용자가 특정 연도를 클릭하면 Year 모드로 전환
                    - 주로 생년월일 선택 등 먼 과거/미래 날짜 선택 시 유용
                    
                    표시 형태:
                    ┌─────────────┐
                    │  2020-2029  │
                    ├─────────────┤
                    │ 2020  2021  │
                    │ 2022  2023  │
                    │ 2024  2025  │
                    │ 2026  2027  │
                    │ 2028  2029  │
                    └─────────────┘
                -->
                
                <!-- 
                    예제 2: Year (연 단위) 표시 모드
                    1년의 12개월을 표시하여 사용자가 월을 선택할 수 있습니다.
                -->
                <Calendar DisplayMode="Year"></Calendar>
                <!-- 
                    DisplayMode="Year":
                    - 선택된 연도의 12개월을 표시
                    - 사용자가 특정 월을 클릭하면 Month 모드로 전환
                    - 월별 리포트, 통계 등에서 월 선택 시 유용
                    
                    표시 형태:
                    ┌─────────────┐
                    │    2025     │
                    ├─────────────┤
                    │ 1월   2월   3월 │
                    │ 4월   5월   6월 │
                    │ 7월   8월   9월 │
                    │ 10월  11월  12월│
                    └─────────────┘
                -->
                
                <!-- 
                    예제 3: Month (월 단위) 표시 모드 - 기본 모드
                    일반적인 달력 형태로 한 달의 날짜들을 표시합니다.
                    이벤트 핸들러와 BlackoutDates 기능을 포함한 완전한 예제입니다.
                -->
                <Calendar DisplayMode="Month"
                          x:Name="cal"
                          SelectedDatesChanged="cal_SelectedDatesChanged">
                    <!-- 
                        Calendar 속성 상세 설명:
                        
                        DisplayMode="Month": 
                        - 월 단위 달력 표시 (기본값)
                        - 한 달의 모든 날짜를 표시
                        - 가장 일반적으로 사용되는 모드
                        
                        x:Name="cal": 
                        - 코드 비하인드와 데이터 바인딩에서 참조할 수 있는 고유 식별자
                        - 이벤트 핸들러에서 선택된 날짜에 접근
                        - 다른 컨트롤과 바인딩 가능
                        
                        SelectedDatesChanged="cal_SelectedDatesChanged": 
                        - 사용자가 날짜를 선택하거나 선택을 변경할 때 발생하는 이벤트
                        - 날짜가 추가되거나 제거될 때마다 호출됨
                        - SelectionMode에 따라 단일/다중 날짜 선택 처리
                    -->
                    
                    <!-- 
                        Calendar.BlackoutDates: 선택할 수 없는 날짜 범위 지정
                        비활성화된 날짜는 회색으로 표시되며 클릭할 수 없습니다.
                    -->
                    <Calendar.BlackoutDates>
                        <!-- 
                            CalendarDateRange: 시작일부터 종료일까지의 날짜 범위 지정
                            Start="02.01.2025" End="02.05.2025": 2025년 2월 1일부터 2월 5일까지 비활성화
                        -->
                        <CalendarDateRange Start="02.01.2025" End="02.05.2025"/>
                        <!-- 
                            BlackoutDates 사용 사례:
                            - 공휴일이나 휴무일 표시
                            - 예약 불가능한 날짜 표시
                            - 과거 날짜 선택 금지
                            - 업무일/비업무일 구분
                            
                            날짜 형식:
                            - MM.dd.yyyy (예: 02.01.2025)
                            - yyyy-MM-dd (예: 2025-02-01)
                            - 문화권에 따라 다른 형식도 가능
                            
                            단일 날짜 비활성화:
                            <CalendarDateRange Start="02.01.2025" End="02.01.2025"/>
                            
                            여러 범위 지정:
                            <Calendar.BlackoutDates>
                                <CalendarDateRange Start="02.01.2025" End="02.05.2025"/>
                                <CalendarDateRange Start="02.15.2025" End="02.20.2025"/>
                                <CalendarDateRange Start="03.01.2025" End="03.01.2025"/>
                            </Calendar.BlackoutDates>
                        -->
                    </Calendar.BlackoutDates>
                </Calendar>
            </StackPanel>
            
            <!-- 
                예제 4: 이벤트 핸들러를 통한 날짜 표시
                코드 비하인드에서 선택된 날짜를 TextBlock에 표시
            -->
            <TextBlock x:Name="tb">텍스트블럭</TextBlock>
            <!-- 
                x:Name="tb": 
                - 코드 비하인드의 cal_SelectedDatesChanged 이벤트 핸들러에서
                  선택된 날짜를 표시하기 위해 사용
                - Text 속성을 동적으로 변경 가능
            -->
            
            <!-- 
                예제 5: 데이터 바인딩을 통한 날짜 표시
                XAML에서 직접 Calendar의 SelectedDate를 TextBlock에 바인딩
            -->
            <TextBlock Text="{Binding ElementName=cal, 
            Path=SelectedDate, 
            StringFormat='yyyy-MM-dd tt hh:mm:ss', 
            ConverterCulture='ko-KR'}">텍스트블럭</TextBlock>
            <!-- 
                데이터 바인딩 상세 설명:
                
                Text="{Binding ...}": 
                - 데이터 바인딩 구문
                - TextBlock의 Text 속성을 다른 컨트롤의 속성에 연결
                
                ElementName=cal: 
                - 바인딩할 소스 요소의 이름
                - "cal"이라는 이름의 Calendar 컨트롤을 참조
                
                Path=SelectedDate: 
                - 바인딩할 속성의 경로
                - Calendar의 SelectedDate 속성 (DateTime? 타입)
                - 선택된 날짜가 없으면 null
                
                StringFormat='yyyy-MM-dd tt hh:mm:ss': 
                - 날짜/시간 형식 지정
                - yyyy: 4자리 연도 (예: 2025)
                - MM: 2자리 월 (01-12)
                - dd: 2자리 일 (01-31)
                - tt: 오전/오후 (AM/PM)
                - hh: 12시간 형식의 시간 (01-12)
                - mm: 분 (00-59)
                - ss: 초 (00-59)
                
                ConverterCulture='ko-KR': 
                - 한국 문화권 형식 사용
                - "오전/오후" 표시를 한글로 출력
                - 날짜 구분자와 형식을 한국 표준에 맞춤
                
                결과 예시:
                - 2025-02-10 오후 03:30:45
                - 날짜를 선택하지 않으면 빈 문자열 표시
                
                다른 형식 예제:
                - 'yyyy년 MM월 dd일': 2025년 02월 10일
                - 'MM/dd/yyyy': 02/10/2025
                - 'dddd, MMMM dd, yyyy': Monday, February 10, 2025
                - 'D': 2025년 2월 10일 월요일 (전체 날짜 패턴)
                
                바인딩의 장점:
                - 코드 없이 XAML만으로 UI 업데이트
                - 자동으로 동기화 (Calendar 선택 변경 시 즉시 반영)
                - 코드 비하인드를 줄여 유지보수성 향상
            -->
        </StackPanel>
    </Grid>
    
    <!--
        Calendar 컨트롤의 추가 유용한 속성:
        
        1. SelectionMode (날짜 선택 모드):
           - SingleDate: 하나의 날짜만 선택 가능 (기본값)
           - SingleRange: 연속된 날짜 범위 선택 가능
           - MultipleRange: 여러 날짜 범위 선택 가능
           - None: 날짜 선택 불가 (표시만)
           
           예제:
           <Calendar SelectionMode="SingleRange"/>
           <!-- 시작 날짜 클릭 후 종료 날짜 클릭하면 범위 선택 -->
        
        2. DisplayDate (표시할 날짜):
           - 처음 표시될 월/년 지정
           - 기본값은 오늘 날짜
           
           예제:
           <Calendar DisplayDate="01/01/2024"/>
           <!-- 2024년 1월을 기본으로 표시 -->
        
        3. DisplayDateStart / DisplayDateEnd (표시 범위):
           - 표시 가능한 날짜 범위 제한
           - 범위 밖의 날짜는 표시되지 않음
           
           예제:
           <Calendar DisplayDateStart="01/01/2024" 
                     DisplayDateEnd="12/31/2024"/>
           <!-- 2024년만 표시 -->
        
        4. IsTodayHighlighted (오늘 날짜 강조):
           - true: 오늘 날짜를 특별한 색으로 강조 (기본값)
           - false: 오늘 날짜를 일반 날짜처럼 표시
           
           예제:
           <Calendar IsTodayHighlighted="True"/>
        
        5. FirstDayOfWeek (주의 첫 번째 요일):
           - 달력의 첫 번째 열에 표시될 요일 지정
           - Sunday, Monday, Tuesday 등
           
           예제:
           <Calendar FirstDayOfWeek="Monday"/>
           <!-- 월요일부터 시작하는 달력 -->
        
        주요 이벤트:
        
        1. SelectedDatesChanged:
           - 선택된 날짜가 변경될 때
           - 단일/다중 날짜 선택 모두 지원
        
        2. DisplayDateChanged:
           - 표시되는 월/년이 변경될 때
           - 사용자가 다음/이전 월로 이동할 때
        
        3. DisplayModeChanged:
           - DisplayMode가 변경될 때
           - Month ↔ Year ↔ Decade 전환 시
        
        주요 속성:
        
        1. SelectedDate (DateTime?):
           - 현재 선택된 단일 날짜
           - SelectionMode가 SingleDate일 때 사용
           - null 가능 (선택된 날짜가 없을 때)
        
        2. SelectedDates (SelectedDatesCollection):
           - 선택된 모든 날짜의 컬렉션
           - SelectionMode가 Range일 때 유용
           - 여러 날짜 확인/추가/제거 가능
        
        코드에서 사용 예제:
        
        // 특정 날짜 선택
        cal.SelectedDate = new DateTime(2025, 2, 10);
        
        // 선택된 날짜 확인
        if (cal.SelectedDate.HasValue)
        {
            DateTime selected = cal.SelectedDate.Value;
            MessageBox.Show($"선택된 날짜: {selected:yyyy-MM-dd}");
        }
        
        // BlackoutDates 동적 추가
        cal.BlackoutDates.Add(new CalendarDateRange(
            new DateTime(2025, 3, 1),
            new DateTime(2025, 3, 5)));
        
        // 오늘부터 이전 날짜 모두 비활성화
        cal.BlackoutDates.AddDatesInPast();
        
        // 여러 날짜 선택 (Range 모드)
        cal.SelectionMode = CalendarSelectionMode.SingleRange;
        cal.SelectedDates.AddRange(
            new DateTime(2025, 2, 1),
            new DateTime(2025, 2, 10));
        
        실전 활용 예제:
        
        1. 예약 시스템:
           <Calendar SelectionMode="SingleRange">
               <Calendar.BlackoutDates>
                   <!-- 이미 예약된 날짜들 -->
               </Calendar.BlackoutDates>
           </Calendar>
        
        2. 생년월일 선택:
           <Calendar DisplayMode="Decade"
                     DisplayDateEnd="{x:Static sys:DateTime.Today}"/>
           <!-- 미래 날짜 선택 불가 -->
        
        3. 기간 선택:
           <StackPanel>
               <Label>시작일</Label>
               <Calendar x:Name="calStart"/>
               <Label>종료일</Label>
               <Calendar x:Name="calEnd"/>
           </StackPanel>
        
        4. 휴가 계획:
           <Calendar SelectionMode="MultipleRange"
                     FirstDayOfWeek="Monday">
               <Calendar.BlackoutDates>
                   <!-- 주말 비활성화 -->
               </Calendar.BlackoutDates>
           </Calendar>
        
        스타일링:
        
        - Background: 배경색
        - BorderBrush: 테두리 색
        - Foreground: 텍스트 색
        
        예제:
        <Calendar Background="LightBlue"
                  BorderBrush="DarkBlue"
                  BorderThickness="2"/>
        
        Calendar vs DatePicker:
        
        Calendar:
        - 항상 확장된 달력 표시
        - 화면 공간을 많이 차지
        - 날짜 범위 선택 가능
        - 시각적으로 명확
        
        DatePicker:
        - 콤팩트한 텍스트 박스 형태
        - 클릭 시에만 달력 팝업
        - 단일 날짜만 선택 가능
        - 공간 효율적
    -->
</Window>
