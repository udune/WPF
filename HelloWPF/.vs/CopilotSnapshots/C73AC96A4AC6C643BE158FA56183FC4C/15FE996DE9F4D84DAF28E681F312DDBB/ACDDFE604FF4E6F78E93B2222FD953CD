<!-- 
    ch24 컨텍스트메뉴 - WPF ContextMenu의 기능을 보여주는 예제 파일
    ContextMenu는 마우스 우클릭(또는 키보드)으로 표시되는 팝업 메뉴입니다.
    특정 컨트롤이나 영역에 대한 컨텍스트별 명령을 제공합니다.
    Menu와 달리 화면에 고정되지 않고, 필요할 때만 표시됩니다.
-->
<Window x:Class="ch24_컨텍스트메뉴.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ch24_컨텍스트메뉴"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    
    <StackPanel>
        <!-- 
            StackPanel: 컨트롤들을 수직으로 배치
            TextBlock과 Button을 세로로 나열
        -->
        
        <!-- TextBlock with ContextMenu -->
        <TextBlock Text="마우스 우클릭" FontSize="20" x:Name="tb">
            <!-- 
                TextBlock:
                - 텍스트 표시 컨트롤
                - ContextMenu가 연결된 대상
                
                Text="마우스 우클릭":
                - 표시될 텍스트
                - 사용자에게 우클릭 안내
                
                FontSize="20":
                - 글꼴 크기 20포인트
                - 눈에 잘 띄는 크기
                
                x:Name="tb":
                - 코드 비하인드에서 접근하기 위한 이름
                - MenuItem 이벤트 핸들러에서 tb.FontWeight, tb.FontStyle 변경
                
                동작:
                - TextBlock 위에서 마우스 우클릭
                - ContextMenu가 팝업으로 표시
                - 메뉴 항목 선택 시 텍스트 서식 변경
            -->
            
            <TextBlock.ContextMenu>
                <!-- 
                    TextBlock.ContextMenu:
                    - TextBlock에 연결된 컨텍스트 메뉴
                    - 마우스 우클릭 시 표시
                    
                    ContextMenu 기본 개념:
                    - 마우스 우클릭으로 표시되는 팝업 메뉴
                    - 특정 컨트롤이나 영역에 대한 명령 제공
                    - 컨텍스트에 따라 다른 메뉴 표시 가능
                    - MenuItem으로 구성 (Menu와 동일)
                    
                    ContextMenu vs Menu:
                    - ContextMenu: 우클릭, 팝업, 컨텍스트별 명령
                    - Menu: 화면 상단, 고정, 전역 명령
                    
                    ContextMenu 표시 방법:
                    1. 마우스 우클릭 (기본)
                    2. Shift+F10 키보드 단축키
                    3. 코드에서 IsOpen = true
                    
                    ContextMenu 특징:
                    - 각 컨트롤마다 별도의 ContextMenu 가능
                    - 컨텍스트에 맞는 명령만 표시
                    - 공간 절약 (필요할 때만 표시)
                    - 사용자 경험 향상 (빠른 접근)
                    
                    일반적인 ContextMenu 사용 예:
                    - TextBox: 잘라내기, 복사, 붙여넣기, 모두 선택
                    - ListBox: 추가, 삭제, 편집, 정렬
                    - TreeView: 확장, 축소, 새로 만들기, 삭제
                    - Image: 복사, 저작권, 저장, 회전, 크기 조정
                -->
                <ContextMenu>
                    <!-- 
                        ContextMenu:
                        - MenuItem들을 포함하는 컨테이너
                        - Menu와 동일한 구조
                    -->
                    
                    <!-- MenuItem: 진하게 -->
                    <MenuItem Header="진하게" Click="MenuItem_Click">
                        <!-- 
                            MenuItem:
                            - ContextMenu의 개별 항목
                            - Menu의 MenuItem과 동일한 기능
                            
                            Header="진하게":
                            - 메뉴 항목의 표시 텍스트
                            - 텍스트를 굵게(Bold) 만드는 명령
                            
                            Click="MenuItem_Click":
                            - 클릭 이벤트 핸들러
                            - tb.FontWeight = FontWeights.Bold
                            
                            동작:
                            1. TextBlock 우클릭
                            2. ContextMenu 표시
                            3. "진하게" 항목 클릭
                            4. MenuItem_Click 이벤트 발생
                            5. tb.FontWeight = FontWeights.Bold
                            6. TextBlock 텍스트가 굵게 표시됨
                        -->
                        <MenuItem.Icon>
                            <Image Source="https://cdn0.iconfinder.com/data/icons/business-startup-10/50/61-512.png"/>
                        </MenuItem.Icon>
                        <!-- 
                            MenuItem.Icon:
                            - 메뉴 항목 왼쪽의 아이콘
                            - 시각적으로 명령 식별
                            
                            Image Source:
                            - 웹 URL (온라인 아이콘)
                            - 실제 프로젝트에서는 로컬 리소스 권장
                            
                            아이콘 모범 사례:
                            - 16x16 픽셀 크기
                            - 명령을 명확히 표현
                            - 일관된 스타일
                            
                            실제 사용 예:
                            <Image Source="Images/Bold.png" Width="16" Height="16"/>
                        -->
                    </MenuItem>
                    
                    <!-- MenuItem: 기울기 (체크 가능) -->
                    <MenuItem Header="기울기" IsCheckable="True" Checked="MenuItem_Checked" Unchecked="MenuItem_Unchecked">
                        <!-- 
                            MenuItem with IsCheckable:
                            - 체크 상태를 가질 수 있는 메뉴 항목
                            - 토글 스위치처럼 동작
                            
                            Header="기울기":
                            - 메뉴 항목 텍스트
                            - 텍스트를 기울임꼴(Italic)로 만드는 명령
                            
                            IsCheckable="True":
                            - 체크 가능한 메뉴 항목
                            - 클릭할 때마다 체크 상태 토글
                            - 체크 표시(✓)가 나타남
                            
                            Checked="MenuItem_Checked":
                            - 체크되었을 때 발생하는 이벤트
                            - tb.FontStyle = FontStyles.Italic
                            
                            Unchecked="MenuItem_Unchecked":
                            - 체크 해제되었을 때 발생하는 이벤트
                            - tb.FontStyle = FontStyles.Normal
                            
                            동작:
                            1. TextBlock 우클릭
                            2. "기울기" 항목 클릭 (체크됨)
                            3. MenuItem_Checked 이벤트
                            4. tb.FontStyle = FontStyles.Italic
                            5. TextBlock이 기울임꼴로 표시
                            6. 다시 클릭 (체크 해제됨)
                            7. MenuItem_Unchecked 이벤트
                            8. tb.FontStyle = FontStyles.Normal
                            9. TextBlock이 일반 스타일로 복원
                            
                            IsCheckable 사용 예:
                            - 보기 옵션: 도구 모음 표시/숨기기
                            - 서식: 굵게, 기울임꼴, 밑줄
                            - 정렬: 왼쪽, 가운데, 오른쪽
                            - 필터: 활성 항목만, 모든 항목
                        -->
                        <MenuItem.Icon>
                            <Image Source="https://cdn0.iconfinder.com/data/icons/business-startup-10/50/61-512.png"/>
                        </MenuItem.Icon>
                        <!-- 아이콘 (기울임꼴 표현 권장) -->
                    </MenuItem>
                </ContextMenu>
            </TextBlock.ContextMenu>
        </TextBlock>
        
        <!-- Button with ContextMenu -->
        <Button Content="버튼 우클릭">
            <!-- 
                Button:
                - 버튼 컨트롤
                - ContextMenu가 연결된 또 다른 대상
                
                Content="버튼 우클릭":
                - 버튼에 표시될 텍스트
                
                동작:
                - 버튼 위에서 마우스 우클릭
                - ContextMenu가 팝업으로 표시
                - TextBlock과 동일한 메뉴 항목
                
                주의:
                - 버튼의 Click 이벤트와 ContextMenu는 독립적
                - 좌클릭: Button.Click 이벤트
                - 우클릭: ContextMenu 표시
            -->
            <Button.ContextMenu>
                <ContextMenu>
                    <!-- 
                        Button.ContextMenu:
                        - Button에 연결된 컨텍스트 메뉴
                        - TextBlock.ContextMenu와 동일한 구조
                        
                        중복 코드:
                        - TextBlock과 Button이 같은 ContextMenu 정의
                        - 실제로는 리소스로 정의하여 재사용 권장
                        
                        리소스로 정의 예:
                        <Window.Resources>
                            <ContextMenu x:Key="FormatContextMenu">
                                <MenuItem Header="진하게" .../>
                                <MenuItem Header="기울기" .../>
                            </ContextMenu>
                        </Window.Resources>
                        
                        사용:
                        <TextBlock ContextMenu="{StaticResource FormatContextMenu}"/>
                        <Button ContextMenu="{StaticResource FormatContextMenu}"/>
                    -->
                    
                    <MenuItem Header="진하게" Click="MenuItem_Click">
                        <!-- 동일한 이벤트 핸들러 사용 -->
                        <MenuItem.Icon>
                            <Image Source="https://cdn0.iconfinder.com/data/icons/business-startup-10/50/61-512.png"/>
                        </MenuItem.Icon>
                    </MenuItem>
                    
                    <MenuItem Header="기울기" IsCheckable="True" Checked="MenuItem_Checked" Unchecked="MenuItem_Unchecked">
                        <!-- 동일한 이벤트 핸들러 사용 -->
                        <MenuItem.Icon>
                            <Image Source="https://cdn0.iconfinder.com/data/icons/business-startup-10/50/61-512.png"/>
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </Button.ContextMenu>
        </Button>
    </StackPanel>
    
    <!--
        ContextMenu 추가 기능 및 활용:
        
        1. 기본 ContextMenu:
           <TextBox>
               <TextBox.ContextMenu>
                   <ContextMenu>
                       <MenuItem Header="잘라내기" InputGestureText="Ctrl+X"/>
                       <MenuItem Header="복사" InputGestureText="Ctrl+C"/>
                       <MenuItem Header="붙여넣기" InputGestureText="Ctrl+V"/>
                   </ContextMenu>
               </TextBox.ContextMenu>
           </TextBox>
        
        2. Separator로 그룹 구분:
           <ContextMenu>
               <MenuItem Header="새로 만들기"/>
               <MenuItem Header="열기"/>
               <Separator/>
               <MenuItem Header="저장"/>
               <MenuItem Header="다른 이름으로 저장"/>
               <Separator/>
               <MenuItem Header="삭제"/>
           </ContextMenu>
        
        3. 서브메뉴:
           <ContextMenu>
               <MenuItem Header="정렬">
                   <MenuItem Header="이름"/>
                   <MenuItem Header="날짜"/>
                   <MenuItem Header="크기"/>
               </MenuItem>
           </ContextMenu>
        
        4. 아이콘과 단축키:
           <ContextMenu>
               <MenuItem Header="복사" InputGestureText="Ctrl+C">
                   <MenuItem.Icon>
                       <Image Source="Images/Copy.png" Width="16"/>
                   </MenuItem.Icon>
               </MenuItem>
           </ContextMenu>
        
        5. 체크 가능한 항목 (라디오 버튼 스타일):
           <ContextMenu>
               <MenuItem Header="왼쪽 정렬" IsCheckable="True" IsChecked="True"/>
               <MenuItem Header="가운데 정렬" IsCheckable="True"/>
               <MenuItem Header="오른쪽 정렬" IsCheckable="True"/>
           </ContextMenu>
        
        실전 활용 예제:
        
        1. TextBox ContextMenu:
           <TextBox>
               <TextBox.ContextMenu>
                   <ContextMenu>
                       <MenuItem Header="실행 취소" InputGestureText="Ctrl+Z"/>
                       <MenuItem Header="다시 실행" InputGestureText="Ctrl+Y"/>
                       <Separator/>
                       <MenuItem Header="잘라내기" InputGestureText="Ctrl+X">
                           <MenuItem.Icon>
                               <Image Source="Images/Cut.png"/>
                           </MenuItem.Icon>
                       </MenuItem>
                       <MenuItem Header="복사" InputGestureText="Ctrl+C">
                           <MenuItem.Icon>
                               <Image Source="Images/Copy.png"/>
                           </MenuItem.Icon>
                       </MenuItem>
                       <MenuItem Header="붙여넣기" InputGestureText="Ctrl+V">
                           <MenuItem.Icon>
                               <Image Source="Images/Paste.png"/>
                           </MenuItem.Icon>
                       </MenuItem>
                       <Separator/>
                       <MenuItem Header="모두 선택" InputGestureText="Ctrl+A"/>
                   </ContextMenu>
               </TextBox.ContextMenu>
           </TextBox>
        
        2. ListBox ContextMenu:
           <ListBox>
               <ListBox.ContextMenu>
                   <ContextMenu>
                       <MenuItem Header="추가" Click="Add_Click">
                           <MenuItem.Icon>
                               <Image Source="Images/Add.png"/>
                           </MenuItem.Icon>
                       </MenuItem>
                       <MenuItem Header="편집" Click="Edit_Click">
                           <MenuItem.Icon>
                               <Image Source="Images/Edit.png"/>
                           </MenuItem.Icon>
                       </MenuItem>
                       <MenuItem Header="삭제" Click="Delete_Click">
                           <MenuItem.Icon>
                               <Image Source="Images/Delete.png"/>
                           </MenuItem.Icon>
                       </MenuItem>
                       <Separator/>
                       <MenuItem Header="정렬">
                           <MenuItem Header="이름"/>
                           <MenuItem Header="날짜"/>
                           <MenuItem Header="크기"/>
                       </MenuItem>
                   </ContextMenu>
               </ListBox.ContextMenu>
           </ListBox>
        
        3. TreeView ContextMenu:
           <TreeView>
               <TreeView.ContextMenu>
                   <ContextMenu>
                       <MenuItem Header="확장" Click="Expand_Click"/>
                       <MenuItem Header="모두 확장" Click="ExpandAll_Click"/>
                       <MenuItem Header="축소" Click="Collapse_Click"/>
                       <Separator/>
                       <MenuItem Header="새 폴더" Click="NewFolder_Click"/>
                       <MenuItem Header="새 파일" Click="NewFile_Click"/>
                       <Separator/>
                       <MenuItem Header="이름 바꾸기" Click="Rename_Click"/>
                       <MenuItem Header="삭제" Click="Delete_Click"/>
                   </ContextMenu>
               </TreeView.ContextMenu>
           </TreeView>
        
        4. Image ContextMenu:
           <Image>
               <Image.ContextMenu>
                   <ContextMenu>
                       <MenuItem Header="복사"/>
                       <MenuItem Header="다른 이름으로 저장"/>
                       <Separator/>
                       <MenuItem Header="회전">
                           <MenuItem Header="시계 방향 90도"/>
                           <MenuItem Header="반시계 방향 90도"/>
                           <MenuItem Header="180도"/>
                       </MenuItem>
                       <MenuItem Header="크기 조정"/>
                       <Separator/>
                       <MenuItem Header="속성"/>
                   </ContextMenu>
               </Image.ContextMenu>
           </Image>
        
        5. 리소스로 재사용:
           <Window.Resources>
               <ContextMenu x:Key="TextFormatMenu">
                   <MenuItem Header="굵게" Click="Bold_Click"/>
                   <MenuItem Header="기울임꼴" Click="Italic_Click"/>
                   <MenuItem Header="밑줄" Click="Underline_Click"/>
                   <Separator/>
                   <MenuItem Header="폰트 색상"/>
                   <MenuItem Header="배경 색상"/>
               </ContextMenu>
           </Window.Resources>
           
           <TextBlock ContextMenu="{StaticResource TextFormatMenu}"/>
           <TextBox ContextMenu="{StaticResource TextFormatMenu}"/>
        
        ContextMenu 스타일링:
        
        1. 배경색 변경:
           <ContextMenu Background="LightGray">
               <!-- 메뉴 항목들 -->
           </ContextMenu>
        
        2. MenuItem 스타일:
           <ContextMenu>
               <ContextMenu.Resources>
                   <Style TargetType="MenuItem">
                       <Setter Property="Padding" Value="5,3"/>
                   </Style>
               </ContextMenu.Resources>
               <!-- 메뉴 항목들 -->
           </ContextMenu>
        
        ContextMenu의 장단점:
        
        장점:
        - 공간 절약 (필요할 때만 표시)
        - 컨텍스트에 맞는 명령 제공
        - 빠른 접근 (우클릭)
        - 직관적 사용자 경험
        
        단점:
        - 발견하기 어려움 (숨겨진 기능)
        - 터치 인터페이스에서 불편
        - 일관성 부족 (컨트롤마다 다름)
        
        모범 사례:
        
        1. 컨텍스트 관련 명령만:
           - 선택된 항목과 관련된 명령
           - 불필요한 항목 포함 안 함
        
        2. 일관성:
           - 비슷한 컨트롤에 비슷한 메뉴
           - 표준 명령 위치 유지
        
        3. 단축키 표시:
           - InputGestureText로 키보드 단축키 표시
           - 사용자 교육 효과
        
        4. 아이콘 사용:
           - 중요한 명령에 아이콘
           - 시각적 인식 향상
        
        5. Separator로 그룹:
           - 관련 명령끼리 묶기
           - 3-7개 항목마다 구분
        
        접근성:
        - Shift+F10 키보드 단축키
        - AutomationProperties 설정
        - 스크린 리더 지원
    -->
</Window>
