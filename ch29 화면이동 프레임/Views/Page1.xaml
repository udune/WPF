<!-- 
    Page1.xaml - 첫 번째 페이지
    Frame에 호스팅되어 표시되는 Page 컨트롤입니다.
    "이동" 버튼을 클릭하면 Page2로 이동합니다.
    
    Page vs Window:
    - Page: Frame 내에서 호스팅, 탐색 기록 관리
    - Window: 독립적인 창, 별도 윈도우
-->
<Page x:Class="ch29_화면이동_프레임.Views.Page1"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:ch29_화면이동_프레임.Views"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="Page1" Background="Salmon">
    <!-- 
        Page 속성:
        
        x:Class:
        - 코드 비하인드 클래스
        - ch29_화면이동_프레임.Views.Page1
        
        d:DesignHeight, d:DesignWidth:
        - 디자인 타임에만 사용
        - 디자이너에서 페이지 크기 미리보기
        - 런타임에는 Frame 크기에 맞춤
        
        Title:
        - 페이지 제목 "Page1"
        - NavigationWindow에서 표시될 수 있음
        - 이 예제에서는 사용 안 함
        
        Background="Salmon":
        - 페이지 배경색 연어색
        - Page1, Page2, Page3를 구별하기 위한 색상
        - Salmon (연어색), LightBlue (하늘색), LightGreen (연두색)
    -->

    <StackPanel>
        <!-- 
            StackPanel:
            - 콘텐츠를 세로로 배치
            - Label과 Button을 위아래로 나열
        -->
        
        <Label FontSize="20">페이지1</Label>
        <!-- 
            Label:
            - 페이지 제목 표시
            - FontSize="20": 큰 글씨로 페이지 번호 표시
            - Content: "페이지1"
            
            역할:
            - 현재 어느 페이지인지 명확히 표시
            - 페이지 전환 시각적 확인
        -->
        
        <Button Content="이동" Click="Button_Click"></Button>
        <!-- 
            Button:
            - Page2로 이동하는 버튼
            
            Content="이동":
            - 버튼 텍스트
            
            Click="Button_Click":
            - 클릭 이벤트 핸들러
            - Page1.xaml.cs의 Button_Click 메서드
            
            동작:
            1. 버튼 클릭
            2. Button_Click 이벤트 발생
            3. Page2 인스턴스 생성
            4. NavigationService.Navigate(page2) 호출
            5. Frame에 Page2 표시
            6. 탐색 기록에 추가: [Page1] → [Page2]
            
            탐색 흐름:
            Page1 (시작) → [이동 버튼 클릭] → Page2
        -->
    </StackPanel>
    
    <!--
        Page 전체 요약:
        
        ========== Page의 특징 ==========
        
        1. Frame 호스팅:
           - Frame 내에서만 표시 가능
           - Window와 달리 독립적인 창 아님
        
        2. NavigationService:
           - Page.NavigationService 자동 제공
           - Frame의 NavigationService와 동일
           - 코드 비하인드에서 쉽게 접근
        
        3. 수명 주기:
           - Navigate() 호출 시 인스턴스 생성
           - Frame에 표시
           - 다른 페이지로 이동 시 메모리에서 해제
           - GoBack()으로 복원 가능
        
        ========== NavigationService 접근 ==========
        
        Page에서:
        NavigationService.Navigate(new Page2());
        
        Frame에서:
        frame.NavigationService.Navigate(new Page2());
        
        동일한 NavigationService:
        - Page의 NavigationService
        - Frame의 NavigationService
        - 같은 객체를 가리킴
        
        ========== Page 생명주기 이벤트 ==========
        
        1. Loaded:
           - 페이지가 Frame에 로드됨
           
        2. OnNavigatedTo:
           - 페이지로 탐색 완료
           - 데이터 수신 가능
           
        3. OnNavigatedFrom:
           - 페이지를 떠남
           - 정리 작업
        
        4. Unloaded:
           - 페이지가 Frame에서 제거됨
        
        ========== 데이터 전달 예제 ==========
        
        Page1에서 데이터 전달:
        var data = new UserData { Name = "홍길동", Age = 30 };
        NavigationService.Navigate(new Page2(), data);
        
        Page2에서 데이터 수신:
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);
            
            if (e.ExtraData is UserData data)
            {
                nameLabel.Content = data.Name;
                ageLabel.Content = data.Age;
            }
        }
        
        ========== 탐색 확인 (Confirmation) ==========
        
        페이지 떠나기 전 확인:
        protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
        {
            base.OnNavigatingFrom(e);
            
            if (hasUnsavedChanges)
            {
                var result = MessageBox.Show("저장하지 않은 변경사항이 있습니다. 계속하시겠습니까?",
                                            "확인", MessageBoxButton.YesNo);
                if (result == MessageBoxResult.No)
                {
                    e.Cancel = true; // 탐색 취소
                }
            }
        }
        
        ========== Page vs UserControl ==========
        
        Page:
        - Frame에서 호스팅
        - NavigationService 제공
        - 탐색 기록 관리
        - 전체 화면 전환
        
        UserControl:
        - 어디든 배치 가능
        - 재사용 가능한 컴포넌트
        - 탐색 기능 없음
        - 부분 UI 구성
        
        ========== 실전 활용 예제 ==========
        
        1. 마법사 (Wizard):
           Page1 (환영) → Page2 (설정) → Page3 (완료)
        
        2. 다단계 폼:
           Page1 (기본 정보) → Page2 (연락처) → Page3 (확인)
        
        3. 앱 내비게이션:
           Page1 (홈) → Page2 (설정) → Page3 (정보)
        
        4. 튜토리얼:
           Page1 (소개) → Page2 (기능 1) → Page3 (기능 2)
    -->
</Page>
